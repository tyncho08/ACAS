{
  "filePath": "/Users/MartinGonella/Desktop/Demos/ACAS/common/acasconvert3.cbl",
  "fileName": "acasconvert3.cbl",
  "timestamp": "2025-09-15T16:25:33.602Z",
  "programId": "acasconvert3",
  "parserUsed": "GnuCOBOL + Regex",
  "parseConfidence": 0,
  "validationStatus": "ERROR",
  "gnuCobolValidation": {
    "success": true,
    "errors": [],
    "warnings": [
      "/Users/MartinGonella/Desktop/Demos/ACAS/common/acasconvert3.cbl:250: warning: no CORRESPONDING items found [-Wcorresponding]",
      "/Users/MartinGonella/Desktop/Demos/ACAS/common/acasconvert3.cbl:256: warning: no CORRESPONDING items found [-Wcorresponding]"
    ]
  },
  "parseErrors": [
    "Cannot read properties of undefined (reading 'total')"
  ],
  "parseWarnings": [
    "/Users/MartinGonella/Desktop/Demos/ACAS/common/acasconvert3.cbl:250: warning: no CORRESPONDING items found [-Wcorresponding]",
    "/Users/MartinGonella/Desktop/Demos/ACAS/common/acasconvert3.cbl:256: warning: no CORRESPONDING items found [-Wcorresponding]"
  ],
  "divisions": {
    "identification": true,
    "environment": true,
    "data": true,
    "procedure": true
  },
  "structure": {
    "sections": [
      {
        "name": "configuration",
        "line": 71
      },
      {
        "name": "input-output",
        "line": 74
      },
      {
        "name": "file",
        "line": 82
      },
      {
        "name": "working-storage",
        "line": 102
      }
    ],
    "paragraphs": [
      {
        "name": "file-control",
        "line": 75
      },
      {
        "name": "AA000-Start",
        "line": 211
      },
      {
        "name": "AA010-Read",
        "line": 235
      },
      {
        "name": "AA020-End",
        "line": 269
      },
      {
        "name": "Invoice-file",
        "line": 271
      }
    ],
    "entryPoints": []
  },
  "dependencies": {
    "calls": [
      {
        "target": "CBL_DELETE_FILE",
        "line": 216,
        "type": "DYNAMIC",
        "using": [
          "Old-File-16"
        ]
      },
      {
        "target": "CBL_RENAME_FILE",
        "line": 217,
        "type": "DYNAMIC",
        "using": [
          "File-16",
          "Old-File-16"
        ]
      }
    ],
    "copies": [
      {
        "name": "&",
        "line": 32,
        "replacing": null
      },
      {
        "name": "of",
        "line": 65,
        "replacing": null
      },
      {
        "name": "slselinv",
        "line": 76,
        "replacing": null
      },
      {
        "name": "slselinv",
        "line": 77,
        "replacing": null
      },
      {
        "name": "slfdinv2",
        "line": 83,
        "replacing": null
      },
      {
        "name": "wsnames",
        "line": 117,
        "replacing": null
      }
    ],
    "performs": []
  },
  "dataFlow": {
    "files": [],
    "moves": [
      {
        "from": "Old-Invoice-Record",
        "to": "SInvoice-Bodies\n              initialise Invoice-Line with filler\n              move corresponding SInvoice-Bodies to Invoice-Line\n              move sil-line to il-Line\n              write  Invoice-Line\n     else\n              move Old-Invoice-Record to SInvoice-Header\n              initialize Invoice-Header\n              move corresponding SInvoice-Header to Invoice-Header\n              move sih-Test  to ih-Test\n              write  Invoice-Header\n     end-if\n     if       fs-reply not = zero\n              display \"Error on writing to (New) Invoice File \" fs-reply\n              stop \"ST901 Note error and hit return for abort run\"\n              close Invoice-File\n                    Old-Invoice-File\n              stop run\n     end-if\n     go       to AA010-Read",
        "line": 248
      }
    ],
    "computes": []
  },
  "businessLogic": {
    "conditions": [
      {
        "type": "IF",
        "condition": "NOT REPLACE WITH YOUR CURRENT ONE COPY & PASTE FROM COPYBOOKS\n*>      IN THE SOURCE DIRECTORY of your old current version which you should\n*>    have renamed as ACAS-3.01 [ if using the previous version ].\n*>\n*>\n*>   WARNING:\n*>    TAKE A BACK UP OF YOUR DATA FILES BEFORE RUNNING - twice.\n*>    TAKE A BACK UP OF YOUR DATA FILES BEFORE RUNNING - YES twice.\n*>\n*>   IMPORTANT.\n*>    Test with cobc flag -Wcorresponding when compiling\n*>     E.g., cobc -x -Wcorresponding acasconvert2.cbl\n*>\n*>     If any fields or other warning are reported investigate before using.\n*>\n*>*************************************************************************\n*>\n*> Copyright Notice.\n*>*****************\n*>\n*> This file/program is part of the Applewood Computers Accounting System\n*>   and is copyright (c) Vincent B Coen. 1976 - 2025 and later.\n*>\n*> This program is free software; you can redistribute it and/or modify it\n*> under the terms of the GNU General Public License as published by the\n*> Free Software Foundation; version 2 ONLY.\n*>\n*> Cobxref is distributed in the hope that it will be useful, but WITHOUT\n*> ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n*> FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n*> for more details. If it breaks, you own both pieces but I will endeavour\n*> to fix it, providing you tell me about the problem.\n*>\n*> You should have received a copy of the GNU General Public License along\n*> with ACAS; see the file COPYING.  If not, write to the Free Software\n*> Foundation, 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.\n*>*************************************************************************\n*>\n environment division.\n configuration section.\n source-computer.        Linux.\n object-computer.        Linux.\n input-output section.\n file-control.\n copy \"slselinv.cob\".    *> New\n copy \"slselinv.cob\"  replacing Invoice-File by Old-Invoice-File\n                                File-16      by Old-File-16\n                                Invoice-Key  by Old-Invoice-Key.\n*>\n data division.\n file section.\n copy \"slfdinv2.cob\".          *> Updated - New O/P- MMORE\n*>\n*>  Now for the OLD\n*>\n fd  Old-Invoice-File.\n*>\n 01  Old-Invoice-Record.                  *> 137\n    02  Old-Inv-Prime.                    *> 41 bytes.\n     03  Old-Invoice-Key.\n         05  Old-Invoice-Nos    pic 9(8).\n         05  Old-Item-Nos       binary-char.\n     03  Old-Invoice-Customer   pic x(7).\n     03  Old-Invoice-Date       binary-long.\n     03  filler             pic x(10).\n     03  Old-Invoice-Type       pic 9.\n     03  filler             pic x(10).\n   02  Old-Inv-Sub-Prime.                 *> 96 bytes.\n     03  filler             pic x(96).\n*>\n\n working-storage section.\n 77  prog-name          pic x(18)  value \"IRSconv3 (3.02.01)\".\n 01  fs-reply           pic 99.\n 01  rec-count          pic 9(4)   value zero.\n 01  A                  pic s9(4)     comp    value zero.\n 01  B                  pic s9(4)     comp    value zero.\n 01  Rrn                binary-long.\n 01  Display-Blk        pic x(78)             value spaces.\n 01  Old-File-16        pic x(16)     value \"invoice.dat.OLD\".\n*>\n 01  Error-Messages.\n     03  SY103    pic x(22) value \"SY103 Rewrite Err 1 = \".\n     03  SY104    pic x(26) value \"SY104 Fix and Press Enter\".\n*>\n copy \"wsnames.cob\".\n*>\n*>    THIS IS THE OLD RECORD LAYOUT in Working Storage.\n*>\n*>*******************************************\n*>        wsinv.cob copied to copybooks as  *\n*>         slwsinv.cob.                     *\n*>                                          *\n*>              In Sales                    *\n*>  Working Storage For The Invoice Header  *\n*>      Also See FDinv2.Cob                 *\n*>*******************************************\n*>   size 129 bytes 09/03/09\n*>   size 134 bytes 24/03/12\n*>   size 137 bytes 18/01/17\n*> WARNING UPDATE all layouts for 5 byte increase (extra statuses)\n*>\n 01  SInvoice-Header.                         *> 137 bytes 18/01/17\n   02 sih-prime.                              *> 41 bytes\n     03  WS-Invoice-Key.\n         05  sih-invoice   pic 9(8).\n         05  sih-test      binary-char  value zero.  *>>> needs to be pic 99\n     03  sih-customer.\n         05  sih-nos       pic x(6).\n         05  sih-check     pic 9.\n     03  sih-date          binary-long.\n     03  sih-order         pic x(10).\n     03  sih-type          pic 9.\n     03  sih-ref           pic x(10).\n   02 Sih-Sub-Prime.                          *> 96 bytes\n     03  sih-description   pic x(32).\n     03  sih-fig                          comp-3.\n         05  sih-p-c       pic s9(7)v99.\n         05  sih-net       pic s9(7)v99.\n         05  sih-extra     pic s9(7)v99.\n         05  sih-carriage  pic s9(7)v99.\n         05  sih-vat       pic s9(7)v99.\n         05  sih-discount  pic s9(7)v99.\n         05  sih-e-vat     pic s9(7)v99.\n         05  sih-c-vat     pic s9(7)v99.\n     03  sih-status        pic x.\n         88  pending                           value \"P\".\n         88  invoiced                          value \"I\".\n         88  sapplied                          value \"Z\".\n     03  sih-status-P      pic x.         *> Pick list Printed           space or P\n     03  sih-status-L      pic x.         *> Invoice Printed             space or L\n     03  sih-status-C      pic x.         *> Invoice Cleared             space or C   paid or credited or cleared/cancelled etc\n     03  sih-status-A      pic x.         *> Invoice Applied to a/c      space or A\n     03  sih-status-I      pic x.         *> Invoice Item lines Deleted  space or D\n     03  sih-lines         binary-char.\n     03  sih-deduct-days   binary-char.\n     03  sih-deduct-amt    pic 999v99    comp.\n     03  sih-deduct-vat    pic 999v99    comp.\n     03  sih-days          binary-char.\n     03  sih-cr            binary-long.\n     03  sih-day-book-flag pic x               value space.\n         88  day-booked                        value \"B\".\n     03  sih-update        pic x.\n         88  sih-analyised                     value \"Z\".\n     03  filler            pic x.      *> Remove this\n*>\n*>*******************************************\n*>                                          *\n*>  Working Storage For The Invoice Lines   *\n*>                                          *\n*>*******************************************\n*> 80 bytes each = 3200 bytes (17/05/13)\n*> still valid 18/01/17\n*>\n 01  SInvoice-Bodies.\n         05  sil-Key.                     *> 9 bytes\n             07  sil-invoice pic 9(8).\n             07  sil-line    binary-char.  *>>> needs to be pic 99\n         05  sil-product     pic x(13).   *> +1 17/5/13\n         05  sil-pa          pic xx.\n         05  sil-qty         binary-short.\n         05  sil-type        pic x.\n         05  sil-description pic x(32).   *> +8 17/5/13\n         05  sil-net         pic s9(7)v99   comp-3.\n         05  sil-unit        pic s9(7)v99   comp-3.\n         05  sil-discount    pic 99v99      comp.\n         05  sil-vat         pic s9(7)v99   comp-3.\n         05  sil-vat-code    pic 9.\n         05  sil-update      pic x.\n             88 sil-analyised                       value \"Z\".\n         05  filler          pic xx.    *>  less 1 (pic x.)\n*>\n*>  Next useful to keep track of number of invoice-line entries.\n*>        NOT YET USED.\n*>\n 01  Sinvoice-Line-Count   binary-char            value zero.\n\n*>\n procedure division.\n AA000-Start.\n*>\n*>  delete invoice.dat.OLD file if exists",
        "line": 32
      },
      {
        "type": "IF",
        "condition": "return-code not = zero\n              display \"Error on Renaming Invoice File \"\n              stop \"ST901 Note error and hit return to abort\"\n              stop run.\n*>\n     open     input Old-Invoice-file.\n     if       fs-reply not = zero      *> JIC but should not happen as prev. will err.\n              display \"Error on opening Old Invoice File \" fs-reply\n              stop \"ST901 Note error and hit return\"\n              close Old-Invoice-File\n              stop run.\n     open     output Invoice-File.\n*>\n*> now clear of any possible problems with the file - hopefully!\n*>\n     Display  prog-name \" Starts\".\n*>\n AA010-Read.\n     read     Old-Invoice-file next record.\n     if       fs-reply = 10\n              go to AA020-End.\n*>\n     if       fs-reply not = zero\n              display \"Error on Reading (Old) Invoice File \" fs-reply\n              stop \"ST901 Note error and hit return for abort run\"\n              close Invoice-File\n                    Old-Invoice-File\n              stop run.\n*>\n     if       Old-Item-Nos not = zero                *> Inv lines read\n              move Old-Invoice-Record to SInvoice-Bodies\n              initialise Invoice-Line with filler\n              move corresponding SInvoice-Bodies to Invoice-Line\n              move sil-line to il-Line\n              write  Invoice-Line\n     else\n              move Old-Invoice-Record to SInvoice-Header\n              initialize Invoice-Header\n              move corresponding SInvoice-Header to Invoice-Header\n              move sih-Test  to ih-Test\n              write  Invoice-Header\n     end-if\n     if       fs-reply not = zero\n              display \"Error on writing to (New) Invoice File \" fs-reply\n              stop \"ST901 Note error and hit return for abort run\"\n              close Invoice-File\n                    Old-Invoice-File\n              stop run\n     end-if\n     go       to AA010-Read.\n*>\n AA020-End.\n     close    Old-Invoice-File\n              Invoice-file.\n     display \"Invoice (Cobol flat) File Conversion to v3.02 completed \"\n     stop     run.\n*>",
        "line": 218
      }
    ],
    "evaluates": [],
    "validations": []
  },
  "complexity": {
    "mccabe": 5,
    "cognitive": 2,
    "halstead": {
      "uniqueOperators": 1,
      "uniqueOperands": 2,
      "totalOperators": 1,
      "totalOperands": 2,
      "vocabulary": 3,
      "length": 3,
      "volume": 4.754887502163468
    }
  },
  "quality": {
    "gotos": [],
    "deadCode": [],
    "missingErrorHandlers": []
  },
  "sql": {
    "hasSQL": false,
    "statements": []
  },
  "cics": {
    "hasCICS": false,
    "statements": []
  }
}
