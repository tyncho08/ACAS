{
  "filePath": "/Users/MartinGonella/Desktop/Demos/ACAS/purchase/pl180.cbl",
  "fileName": "pl180.cbl",
  "timestamp": "2025-09-15T16:25:47.343Z",
  "programId": "pl180",
  "parserUsed": "GnuCOBOL + Regex",
  "parseConfidence": 0,
  "validationStatus": "ERROR",
  "gnuCobolValidation": {
    "success": true,
    "errors": [],
    "warnings": []
  },
  "parseErrors": [
    "Cannot read properties of undefined (reading 'total')"
  ],
  "parseWarnings": [],
  "divisions": {
    "identification": true,
    "environment": true,
    "data": true,
    "procedure": true
  },
  "structure": {
    "sections": [
      {
        "name": "input-output",
        "line": 81
      },
      {
        "name": "file",
        "line": 93
      },
      {
        "name": "working-storage",
        "line": 95
      },
      {
        "name": "linkage",
        "line": 109
      },
      {
        "name": "init01",
        "line": 124
      },
      {
        "name": "Fixed-Data",
        "line": 187
      }
    ],
    "paragraphs": [
      {
        "name": "file-control",
        "line": 84
      },
      {
        "name": "i-o-control",
        "line": 87
      },
      {
        "name": "file-defs",
        "line": 121
      },
      {
        "name": "Menu-Return",
        "line": 130
      },
      {
        "name": "Menu-Input",
        "line": 146
      },
      {
        "name": "loadit",
        "line": 170
      },
      {
        "name": "file-defs",
        "line": 174
      },
      {
        "name": "Menu-Exit",
        "line": 177
      },
      {
        "name": "menu-Ex",
        "line": 181
      },
      {
        "name": "goback",
        "line": 182
      },
      {
        "name": "Data-Entry",
        "line": 205
      },
      {
        "name": "Confirmation",
        "line": 221
      }
    ],
    "entryPoints": []
  },
  "dependencies": {
    "calls": [],
    "copies": [
      {
        "name": "of",
        "line": 71,
        "replacing": null
      },
      {
        "name": "envdiv",
        "line": 80,
        "replacing": null
      },
      {
        "name": "wsfnctn",
        "line": 99,
        "replacing": null
      },
      {
        "name": "Test-Data-Flags",
        "line": 107,
        "replacing": null
      },
      {
        "name": "wscall",
        "line": 112,
        "replacing": null
      },
      {
        "name": "wssystem",
        "line": 113,
        "replacing": null
      },
      {
        "name": "wsnames",
        "line": 114,
        "replacing": null
      }
    ],
    "performs": [
      {
        "target": "Fixed-Data",
        "thru": null,
        "line": 128
      },
      {
        "target": "Fixed-Data",
        "thru": null,
        "line": 152
      }
    ]
  },
  "dataFlow": {
    "files": [],
    "moves": [
      {
        "from": "WS-caller",
        "to": "WS-del-link",
        "line": 125
      },
      {
        "from": "WS-called",
        "to": "WS-caller",
        "line": 126
      },
      {
        "from": "zero",
        "to": "menu-Reply",
        "line": 131
      },
      {
        "from": "\"pl020\"",
        "to": "WS-called\n *>             go to loadit",
        "line": 154
      },
      {
        "from": "\"pl030\"",
        "to": "WS-called\n *>             go to loadit",
        "line": 157
      },
      {
        "from": "\"pl040\"",
        "to": "WS-called\n *>             go to loadit",
        "line": 160
      },
      {
        "from": "\"pl050\"",
        "to": "WS-called\n *>             go to loadit",
        "line": 163
      },
      {
        "from": "\"pl800\"",
        "to": "WS-called\n              go to loadit",
        "line": 166
      },
      {
        "from": "WS-caller",
        "to": "WS-called",
        "line": 178
      },
      {
        "from": "WS-del-link",
        "to": "WS-caller",
        "line": 179
      },
      {
        "from": "Next-Folio",
        "to": "WS-Next-Folio",
        "line": 206
      },
      {
        "from": "WS-Next-Folio",
        "to": "Next-Folio",
        "line": 209
      },
      {
        "from": "vat-ac",
        "to": "WS-vat-ac",
        "line": 216
      },
      {
        "from": "WS-vat-ac",
        "to": "vat-ac",
        "line": 219
      },
      {
        "from": "\"Y\"",
        "to": "WS-Reply",
        "line": 222
      }
    ],
    "computes": []
  },
  "businessLogic": {
    "conditions": [
      {
        "type": "IF",
        "condition": "it breaks, you own both pieces but I will endeavour\n*> to fix it, providing you tell me about the problem.\n*>\n*> You should have received a copy of the GNU General Public License along\n*> with ACAS; see the file COPYING.  If not, write to the Free Software\n*> Foundation, 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.\n*>\n*>*************************************************************************\n*>\n environment             division.\n*>================================\n*>\n copy \"envdiv.cob\".\n input-output            section.\n*>-------------------------------\n*>\n file-control.\n*>------------\n*>\n i-o-control.\n*>-----------\n*>\n data                    division.\n*>================================\n*>\n file section.\n*>------------\n working-storage section.\n*>-----------------------\n 77  prog-name          pic x(15) value \"PL180 (3.02.05)\".\n*>\n copy \"wsfnctn.cob\".\n*>\n 01  WS-data.\n     03  menu-Reply      pic x.\n     03  WS-Reply        pic x.\n     03  WS-Next-Folio   pic 9(8).\n     03  WS-vat-ac       pic 9(6).\n*>\n copy \"Test-Data-Flags.cob\".  *> set sw-testing to zero to stop logging.\n*>\n linkage section.\n*>***************\n*>\n copy \"wscall.cob\".\n copy \"wssystem.cob\". *> File-Defs\n copy \"wsnames.cob\".\n*>\n 01  to-day              pic x(10).\n*>\n procedure division using WS-calling-data\n                          system-record\n                          to-day\n                          file-defs.\n*>=======================================\n*>\n init01 section.\n     move     WS-caller to WS-del-link.\n     move     WS-called to WS-caller.\n     if       Next-Folio = zero\n              perform  Fixed-Data.\n*>\n Menu-Return.\n     move     zero  to  menu-Reply.\n     display  prog-name at 0101 with foreground-color 2 erase eos.\n     display  \"Transaction Sub-System Menu\" at 0128 with foreground-color 2.\n     display  to-day at 0171 with foreground-color 2.\n*>\n     display  \"Select one of the following by number :- [ ]\" at 0501 with foreground-color 2.\n*>\n     display  \"(1)  Amend Transactions Fixed Data\"    at 0811    with foreground-color 2.\n *>    display  \"(2)  Enter Invoices\" at 1011                with foreground-color 2.\n *>    display  \"(3)  Amend Invoices\" at 1211                with foreground-color 2.\n *>    display  \"(4)  Delete Invoices\" at 1411               with foreground-color 2.\n *>    display  \"(5)  Invoice Proof Report\" at 1611          with foreground-color 2.\n     display  \"(9)  Recurring Transaction Processing\" at 1811  with foreground-color 2.\n     display  \"(X)  Return to System Menu\" at 2011         with foreground-color 2.\n*>\n Menu-Input.\n     accept   menu-Reply at 0543 with foreground-color 6 auto UPPER.\n     move     function upper-case (Menu-Reply) to Menu-Reply.\n     if       menu-Reply = \"X\"\n              go to  Menu-Exit.\n     if       menu-Reply  =  1\n              perform  Fixed-Data.\n *>    if       menu-Reply  = 2\n *>             move \"pl020\" to WS-called\n *>             go to loadit.\n *>    if       menu-Reply  = 3\n *>             move \"pl030\" to WS-called\n *>             go to loadit.\n *>    if       menu-Reply  =  4\n *>             move \"pl040\" to WS-called\n *>             go to loadit.\n *>    if       menu-Reply  =  5\n *>             move \"pl050\" to WS-called\n *>             go to loadit.\n     if       menu-Reply  =  9\n              move \"pl800\" to WS-called\n              go to loadit.\n     go       to Menu-Return.\n*>\n loadit.\n     call     WS-called using WS-calling-data\n                              system-record\n                              to-day\n                              file-defs.\n     go       to Menu-Return.\n*>\n Menu-Exit.\n     move     WS-caller   to WS-called.\n     move     WS-del-link to WS-caller.\n*>\n menu-Ex.\n     goback.\n*>******************************************\n*>                  Procedures             *\n*>******************************************\n*>\n Fixed-Data              section.\n*>===============================\n*>\n     display  prog-name at 0101 with foreground-color 2  erase eos.\n     display  \"Transaction Fixed Data\" at 0131  with foreground-color 2.\n     display  to-day at 0171 with foreground-color 2.\n*>\n     display  \"Next Folio\" at 0511 with foreground-color 2.\n     display  \"- [        ]\" at 0545 with foreground-color 2.\n*>\n     if       G-L\n              display \"Vat Account\" at 0711 with foreground-color 2\n              display \"- [      ]\"  at 0745 with foreground-color 2.\n*>\n     display  \"Details ok to file (Y/N) ...........[Y]\" at 1011 with foreground-color 2.\n     display  \"Warning the Vat Account is Not checked that it exists in the CoA\"\n                                    at 1411 with foreground-color 4 highlight.\n*>\n Data-Entry.\n     move     Next-Folio to WS-Next-Folio.      *> Param file is updated by purchase menu on return\n     display  WS-Next-Folio at 0548 with foreground-color 3.\n     accept   WS-Next-Folio at 0548 with foreground-color 3 update\n     move     WS-Next-Folio to Next-Folio.\n     if       Next-Folio = zero\n              go to  Data-Entry.\n*>\n     if       not  G-L\n              go to  Confirmation.\n*>\n     move     vat-ac to WS-vat-ac.\n     display  WS-vat-ac at 0748 with foreground-color 3.\n     accept   WS-vat-ac at 0748 with foreground-color 3 update.\n     move     WS-vat-ac to vat-ac.\n*>\n Confirmation.\n     move     \"Y\"  to  WS-Reply.\n     accept   WS-Reply at 1048 with foreground-color 6 update.\n     move     function upper-case (ws-Reply) to WS-Reply.\n*>\n     if       WS-Reply = \"N\"\n              go to  Data-Entry.\n     if       WS-Reply not = \"Y\"\n              go to  Confirmation.\n*>\n Main-Exit.   exit.",
        "line": 68
      }
    ],
    "evaluates": [],
    "validations": []
  },
  "complexity": {
    "mccabe": 2,
    "cognitive": 1,
    "halstead": {
      "uniqueOperators": 1,
      "uniqueOperands": 18,
      "totalOperators": 15,
      "totalOperands": 30,
      "vocabulary": 19,
      "length": 45,
      "volume": 191.15673810496133
    }
  },
  "quality": {
    "gotos": [],
    "deadCode": [],
    "missingErrorHandlers": []
  },
  "sql": {
    "hasSQL": false,
    "statements": []
  },
  "cics": {
    "hasCICS": false,
    "statements": []
  }
}
