{
  "filePath": "/Users/MartinGonella/Desktop/Demos/ACAS/common/slinvoiceMT.cbl",
  "fileName": "slinvoiceMT.cbl",
  "timestamp": "2025-09-15T16:25:36.048Z",
  "programId": "slinvoiceMT",
  "parserUsed": "GnuCOBOL + Regex",
  "parseConfidence": 0,
  "validationStatus": "ERROR",
  "gnuCobolValidation": {
    "success": true,
    "errors": [],
    "warnings": []
  },
  "parseErrors": [
    "Cannot read properties of undefined (reading 'total')"
  ],
  "parseWarnings": [],
  "divisions": {
    "identification": true,
    "environment": true,
    "data": true,
    "procedure": true
  },
  "structure": {
    "sections": [
      {
        "name": "input-output",
        "line": 256
      },
      {
        "name": "Working-Storage",
        "line": 258
      },
      {
        "name": "Linkage",
        "line": 442
      },
      {
        "name": "screen",
        "line": 460
      },
      {
        "name": "ba-ACAS-DAL-Process",
        "line": 482
      },
      {
        "name": "bb000-HV-Load",
        "line": 1444
      },
      {
        "name": "exit",
        "line": 1488
      },
      {
        "name": "bb100-UnloadHVs",
        "line": 1490
      },
      {
        "name": "exit",
        "line": 1540
      },
      {
        "name": "bb200-Insert",
        "line": 1542
      },
      {
        "name": "exit",
        "line": 1946
      },
      {
        "name": "bb300-Update",
        "line": 1948
      },
      {
        "name": "exit",
        "line": 2356
      },
      {
        "name": "bc000-RG-Process",
        "line": 2358
      },
      {
        "name": "bc090-Process-Rewrite",
        "line": 2722
      },
      {
        "name": "bc000-HV-Load-rg1",
        "line": 2775
      },
      {
        "name": "exit",
        "line": 2807
      },
      {
        "name": "bc100-UnloadHVs-rg1",
        "line": 2809
      },
      {
        "name": "exit",
        "line": 2846
      },
      {
        "name": "bc200-Insert-rg1",
        "line": 2848
      },
      {
        "name": "exit",
        "line": 3039
      },
      {
        "name": "bc300-Update-rg1",
        "line": 3041
      },
      {
        "name": "exit",
        "line": 3236
      }
    ],
    "paragraphs": [
      {
        "name": "ba010-Initialise",
        "line": 496
      },
      {
        "name": "SQL-Err",
        "line": 508
      },
      {
        "name": "end-evaluate",
        "line": 540
      },
      {
        "name": "end-string",
        "line": 573
      },
      {
        "name": "end-string",
        "line": 577
      },
      {
        "name": "end-string",
        "line": 581
      },
      {
        "name": "end-string",
        "line": 585
      },
      {
        "name": "end-string",
        "line": 589
      },
      {
        "name": "end-string",
        "line": 593
      },
      {
        "name": "end-if",
        "line": 703
      },
      {
        "name": "ba041-Reread",
        "line": 705
      },
      {
        "name": "end-if",
        "line": 740
      },
      {
        "name": "ba042-Fetch",
        "line": 744
      },
      {
        "name": "end-if",
        "line": 810
      },
      {
        "name": "end-if",
        "line": 816
      },
      {
        "name": "SQL-State",
        "line": 1159
      },
      {
        "name": "end-if",
        "line": 1246
      },
      {
        "name": "end-if",
        "line": 1343
      },
      {
        "name": "WE-Error",
        "line": 1345
      },
      {
        "name": "SQL-Err",
        "line": 1404
      },
      {
        "name": "ba100-Bad-Function",
        "line": 1410
      },
      {
        "name": "ba998-Free",
        "line": 1422
      },
      {
        "name": "ba999-end",
        "line": 1434
      },
      {
        "name": "end-if",
        "line": 1439
      },
      {
        "name": "ba999-exit",
        "line": 1441
      },
      {
        "name": "bb000-Exit",
        "line": 1487
      },
      {
        "name": "bb100-Exit",
        "line": 1539
      },
      {
        "name": "bb200-Exit",
        "line": 1945
      },
      {
        "name": "bb300-Exit",
        "line": 2355
      },
      {
        "name": "end-string",
        "line": 2410
      },
      {
        "name": "end-string",
        "line": 2462
      },
      {
        "name": "bc051-Fetch-RG1",
        "line": 2465
      },
      {
        "name": "bc058-Restore-Pointers",
        "line": 2510
      },
      {
        "name": "SQL-State",
        "line": 2527
      },
      {
        "name": "end-if",
        "line": 2625
      },
      {
        "name": "end-if",
        "line": 2716
      },
      {
        "name": "SQL-Err",
        "line": 2769
      },
      {
        "name": "bc000-Exit",
        "line": 2806
      },
      {
        "name": "bc100-Exit",
        "line": 2845
      },
      {
        "name": "bc200-Exit",
        "line": 3038
      },
      {
        "name": "bc300-Exit",
        "line": 3235
      },
      {
        "name": "bc998-Free",
        "line": 3238
      },
      {
        "name": "Ca-Process-Logs",
        "line": 3250
      },
      {
        "name": "ACAS-DAL-Common-data",
        "line": 3254
      }
    ],
    "entryPoints": []
  },
  "dependencies": {
    "calls": [
      {
        "target": "MySQL_errno",
        "line": 681,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "*>",
          "set",
          "non",
          "'0'",
          "if",
          "no",
          "rows",
          "?",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "call",
          "\"MySQL_error\"",
          "using",
          "WS-MYSQL-Error-Message",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "end-if",
          "*>",
          "do",
          "not",
          "really",
          "need",
          "to",
          "do",
          "this",
          "meaning",
          "the",
          "above",
          "CALL",
          "move",
          "10",
          "to",
          "fs-reply",
          "move",
          "10",
          "to",
          "WE-Error",
          "*>",
          "should",
          "be",
          "0",
          "'JIC'",
          "likewise",
          "the",
          "others",
          "move",
          "\"No",
          "Data\"",
          "to",
          "WS-File-Key",
          "go",
          "to",
          "ba999-End",
          "*>",
          "can",
          "clear",
          "the",
          "dup",
          "code",
          "after",
          "testing",
          "end-if",
          "*>",
          "We",
          "have",
          "data",
          "set",
          "Cursor-Active",
          "to",
          "true",
          "move",
          "WS-MYSQL-Count-Rows",
          "to",
          "WS-Temp-ED-Row",
          "move",
          "spaces",
          "to",
          "WS-File-Key",
          "string",
          "\">",
          "0",
          "got",
          "cnt=\"",
          "delimited",
          "by",
          "size",
          "WS-Temp-ED-Row",
          "delimited",
          "by",
          "size",
          "\"",
          "recs",
          "for",
          "INVOICE-REC",
          "Table\"",
          "into",
          "WS-File-Key",
          "end-string",
          "perform",
          "ba999-End",
          "*>",
          "log",
          "it",
          "end-if"
        ]
      },
      {
        "target": "MySQL_fetch_record",
        "line": 751,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-RESULT",
          "HV-SINVOICE-KEY",
          "HV-IH-INVOICE",
          "HV-IH-TEST",
          "HV-IH-CUSTOMER",
          "HV-IH-DAT",
          "HV-IH-ORDER",
          "HV-IH-TYPE",
          "HV-IH-REF",
          "HV-IH-DESCRIPTION",
          "HV-IH-P-C",
          "HV-IH-NET",
          "HV-IH-EXTRA",
          "HV-IH-CARRIAGE",
          "HV-IH-VAT",
          "HV-IH-DISCOUNT",
          "HV-IH-E-VAT",
          "HV-IH-C-VAT",
          "HV-IH-STATUS",
          "HV-IH-STATUS-P",
          "HV-IH-STATUS-L",
          "HV-IH-STATUS-C",
          "HV-IH-STATUS-A",
          "HV-IH-STATUS-I",
          "HV-IH-DEDUCT-DAYS",
          "HV-IH-DEDUCT-AMT",
          "HV-IH-DEDUCT-VAT",
          "HV-IH-DAYS",
          "HV-IH-CR",
          "HV-IH-LINES",
          "HV-IH-DAY-BOOK-FLAG",
          "HV-IH-UPDATE",
          "*>",
          "/MYSQL-END\\",
          "end-call",
          "*>",
          "if",
          "return-code",
          "=",
          "-1",
          "*>",
          "no",
          "more",
          "data",
          "so",
          "free",
          "cursor",
          "&",
          "return",
          "move",
          "10",
          "to",
          "fs-Reply",
          "WE-Error",
          "*>",
          "should",
          "be",
          "0",
          "likewise",
          "the",
          "others",
          "move",
          "\"EOF\"",
          "to",
          "WS-File-Key",
          "set",
          "Cursor-Not-Active",
          "to",
          "true",
          "go",
          "to",
          "ba999-End",
          "end-if",
          "*>",
          "if",
          "WS-MYSQL-Count-Rows",
          "=",
          "zero",
          "*>",
          "no",
          "data",
          "but",
          "should",
          "not",
          "happen",
          "here",
          "call",
          "\"MySQL_errno\"",
          "using",
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "WS-MYSQL-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "*>",
          "Not",
          "really",
          "needed",
          "but",
          "help",
          "for",
          "testing",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "*>",
          "ditto",
          "initialize",
          "WS-Invoice-Record",
          "with",
          "filler",
          "move",
          "\"EOF2\"",
          "to",
          "WS-File-Key",
          "end-if",
          "move",
          "10",
          "to",
          "fs-reply",
          "*>",
          "EOF",
          "equivilent",
          "!!",
          "move",
          "10",
          "to",
          "WE-Error",
          "set",
          "Cursor-Not-Active",
          "to",
          "true",
          "go",
          "to",
          "ba999-End",
          "end-if"
        ]
      },
      {
        "target": "MySQL_fetch_record",
        "line": 883,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-RESULT",
          "HV-SINVOICE-KEY",
          "HV-IH-INVOICE",
          "HV-IH-TEST",
          "HV-IH-CUSTOMER",
          "HV-IH-DAT",
          "HV-IH-ORDER",
          "HV-IH-TYPE",
          "HV-IH-REF",
          "HV-IH-DESCRIPTION",
          "HV-IH-P-C",
          "HV-IH-NET",
          "HV-IH-EXTRA",
          "HV-IH-CARRIAGE",
          "HV-IH-VAT",
          "HV-IH-DISCOUNT",
          "HV-IH-E-VAT",
          "HV-IH-C-VAT",
          "HV-IH-STATUS",
          "HV-IH-STATUS-P",
          "HV-IH-STATUS-L",
          "HV-IH-STATUS-C",
          "HV-IH-STATUS-A",
          "HV-IH-STATUS-I",
          "HV-IH-DEDUCT-DAYS",
          "HV-IH-DEDUCT-AMT",
          "HV-IH-DEDUCT-VAT",
          "HV-IH-DAYS",
          "HV-IH-CR",
          "HV-IH-LINES",
          "HV-IH-DAY-BOOK-FLAG",
          "HV-IH-UPDATE",
          "*>",
          "/MYSQL-END\\",
          "end-call",
          "*>",
          "if",
          "WS-MYSQL-Count-Rows",
          "not",
          ">",
          "zero",
          "call",
          "\"MySQL_errno\"",
          "using",
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "move",
          "990",
          "to",
          "WE-Error",
          "call",
          "\"MySQL_error\"",
          "using",
          "WS-MYSQL-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "else",
          "move",
          "989",
          "to",
          "WE-Error",
          "move",
          "zero",
          "to",
          "SQL-Err",
          "move",
          "spaces",
          "to",
          "SQL-Msg",
          "end-if",
          "move",
          "23",
          "to",
          "fs-reply",
          "move",
          "spaces",
          "to",
          "WS-File-Key",
          "go",
          "to",
          "ba998-Free",
          "end-if",
          "*>",
          "row",
          "count",
          "zero",
          "should",
          "show",
          "up",
          "as",
          "a",
          "MYSQL",
          "error",
          "?",
          "perform",
          "bb100-UnloadHVs",
          "*>",
          "transfer/move",
          "HV",
          "vars",
          "to",
          "ws-Record",
          "layout",
          "move",
          "HV-SINVOICE-KEY",
          "to",
          "WS-File-Key"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 1030,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "WS-MYSQL-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "end-if",
          "move",
          "21",
          "to",
          "fs-reply",
          "*>",
          "this",
          "may",
          "need",
          "changing",
          "for",
          "val",
          "in",
          "WE-Error!!",
          "move",
          "zero",
          "to",
          "WE-Error",
          "else",
          "move",
          "zero",
          "to",
          "FS-Reply",
          "WE-Error",
          "move",
          "WS-MYSQL-Count-Rows",
          "to",
          "WS-Temp-ED-Row",
          "string",
          "MOST-relation",
          "WS-Invoice-Record",
          "(K:L)",
          "\"",
          "got",
          "\"",
          "delimited",
          "by",
          "size",
          "WS-Temp-ED-Row",
          "delimited",
          "by",
          "size",
          "\"",
          "recs\"",
          "into",
          "WS-File-Key",
          "end-string",
          "end-if",
          "perform",
          "ba999-End"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 1106,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "WS-MYSQL-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "end-if",
          "move",
          "21",
          "to",
          "fs-reply",
          "*>",
          "this",
          "may",
          "need",
          "changing",
          "for",
          "val",
          "in",
          "WE-Error!!",
          "move",
          "zero",
          "to",
          "WE-Error",
          "else",
          "move",
          "zero",
          "to",
          "FS-Reply",
          "WE-Error",
          "move",
          "WS-MYSQL-Count-Rows",
          "to",
          "WS-Temp-ED-Row",
          "string",
          "MOST-relation",
          "WS-Invoice-Record",
          "(K2:L2)",
          "\"",
          "got",
          "\"",
          "delimited",
          "by",
          "size",
          "WS-Temp-ED-Row",
          "delimited",
          "by",
          "size",
          "\"",
          "recs",
          "RG1",
          "(Lines)\"",
          "into",
          "WS-File-Key",
          "end-string",
          "end-if",
          "*>",
          "*>",
          "Save",
          "pointer",
          "and",
          "count",
          "for",
          "RG1",
          "also",
          "Cursor2",
          "active",
          "(or",
          "not",
          ")",
          "*>",
          "*>",
          "ALL",
          "this",
          "does",
          "depend",
          "on",
          "application",
          "code",
          "in",
          "slnnn",
          "????",
          "<<<<<<<",
          "*>",
          "move",
          "WS-Mysql-Result",
          "to",
          "WS-Mysql-Save-Result-RG1"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 1165,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "move",
          "99",
          "to",
          "fs-reply",
          "*>",
          "this",
          "may",
          "need",
          "changing",
          "for",
          "val",
          "in",
          "WE-Error!!",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "Ws-Mysql-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "if",
          "Sql-State",
          "=",
          "\"23000\"",
          "*>",
          "Dup",
          "key",
          "or",
          "SQL-Err",
          "(1:4)",
          "=",
          "\"1062\"",
          "*>",
          "Ditto,",
          "ditto",
          "or",
          "=",
          "\"1022\"",
          "move",
          "22",
          "to",
          "fs-reply",
          "end-if",
          "end-if",
          "end-if",
          "perform",
          "ba999-End"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 1232,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "Ws-Mysql-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "end-if",
          "move",
          "99",
          "to",
          "fs-reply",
          "move",
          "995",
          "to",
          "WE-Error",
          "go",
          "to",
          "ba999-End",
          "else",
          "move",
          "spaces",
          "to",
          "SQL-Msg",
          "move",
          "zero",
          "to",
          "SQL-Err",
          "end-if"
        ]
      },
      {
        "target": "MySQL_query",
        "line": 1278,
        "type": "DYNAMIC",
        "using": [
          "SQLCA-STATEMENT"
        ]
      },
      {
        "target": "MySQL_query",
        "line": 1287,
        "type": "DYNAMIC",
        "using": [
          "SQLCA-STATEMENT"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 1329,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "Ws-Mysql-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "end-if",
          "move",
          "99",
          "to",
          "fs-reply",
          "move",
          "995",
          "to",
          "WE-Error",
          "go",
          "to",
          "ba999-End",
          "else",
          "*>",
          "of",
          "course",
          "there",
          "could",
          "be",
          "no",
          "data",
          "in",
          "table",
          "move",
          "spaces",
          "to",
          "SQL-Msg",
          "move",
          "zero",
          "to",
          "SQL-Err",
          "end-if"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 1390,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "Ws-Mysql-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "end-if",
          "move",
          "99",
          "to",
          "fs-reply",
          "*>",
          "this",
          "may",
          "need",
          "changing",
          "for",
          "val",
          "in",
          "WE-Error!!",
          "move",
          "994",
          "to",
          "WE-Error",
          "go",
          "to",
          "ba999-End",
          "end-if",
          "move",
          "zero",
          "to",
          "FS-Reply",
          "WE-Error",
          "SQL-Err"
        ]
      },
      {
        "target": "MySQL_free_result",
        "line": 1430,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-RESULT",
          "end-call",
          "*>",
          "/MYSQL-END\\",
          "set",
          "Cursor-Not-Active",
          "to",
          "true"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 2436,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "*>",
          "set",
          "non",
          "'0'",
          "if",
          "no",
          "rows",
          "?",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "call",
          "\"MySQL_error\"",
          "using",
          "WS-MYSQL-Error-Message",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "end-if",
          "move",
          "23",
          "to",
          "fs-reply",
          "move",
          "890",
          "to",
          "WE-Error",
          "move",
          "spaces",
          "to",
          "WS-File-Key",
          "string",
          "\"No",
          "RG1",
          "Data",
          "for",
          "\"",
          "WS-Invoice-Record",
          "(K:L)",
          "into",
          "WS-File-Key",
          "end-string",
          "initialise",
          "WS-Invoice-Record",
          "*>",
          "Clear",
          "both",
          "in",
          "case",
          "called",
          "does",
          "not",
          "spot",
          "end",
          "of",
          "WS-Invoice-Line",
          "*>",
          "data",
          "for",
          "Invoice",
          "and",
          "to",
          "help",
          "debugging",
          "if",
          "so",
          "go",
          "to",
          "bc058-Restore-Pointers",
          "*>",
          "do",
          "ba999-end",
          "at",
          "end",
          "end-if",
          "*>",
          "move",
          "WS-MYSQL-Count-Rows",
          "to",
          "WS-Temp-ED-Row"
        ]
      },
      {
        "target": "MySQL_fetch_record",
        "line": 2476,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-RESULT",
          "HV1-IL-LINE-KEY",
          "HV1-IL-INVOICE",
          "HV1-IL-LINE",
          "HV1-IL-PRODUCT",
          "HV1-IL-PA",
          "HV1-IL-QTY",
          "HV1-IL-TYPE",
          "HV1-IL-DESCRIPTION",
          "HV1-IL-NET",
          "HV1-IL-UNIT",
          "HV1-IL-DISCOUNT",
          "HV1-IL-VAT",
          "HV1-IL-VAT-CODE",
          "HV1-IL-UPDATE",
          "*>",
          "/MYSQL-END\\",
          "end-call",
          "*>",
          "if",
          "WS-MYSQL-Count-Rows",
          ">",
          "zero",
          "*>",
          "transfer/move",
          "HV1",
          "vars",
          "to",
          "ws-Invoice-Line",
          "then",
          "to",
          "ws-Invoice-Record",
          "perform",
          "bc100-UnloadHVs-rg1",
          "move",
          "WS-Invoice-Line",
          "to",
          "WS-Invoice-Record",
          "else",
          "initialise",
          "WS-Invoice-Line",
          "*>",
          "Incase",
          "called",
          "does",
          "not",
          "spot",
          "no",
          "more",
          "data",
          "for",
          "invoice"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 2533,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "move",
          "99",
          "to",
          "fs-reply",
          "*>",
          "this",
          "may",
          "need",
          "changing",
          "for",
          "val",
          "in",
          "WE-Error!!",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "or",
          "Sql-State",
          "=",
          "\"23000\"",
          "*>",
          "Dup",
          "key",
          "(rec",
          "already",
          "present)",
          "call",
          "\"MySQL_error\"",
          "using",
          "Ws-Mysql-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "if",
          "Sql-State",
          "=",
          "\"23000\"",
          "*>",
          "Dup",
          "key",
          "(rec",
          "already",
          "present)",
          "or",
          "SQL-Err",
          "(1:4)",
          "=",
          "\"1062\"",
          "or",
          "=",
          "\"1022\"",
          "move",
          "22",
          "to",
          "fs-reply",
          "else",
          "move",
          "99",
          "to",
          "fs-reply",
          "*>",
          "this",
          "may",
          "need",
          "changing",
          "for",
          "val",
          "in",
          "WE-Error!!",
          "end-if",
          "end-if",
          "move",
          "spaces",
          "to",
          "WS-File-Key",
          "string",
          "\"Cant",
          "Re|WriteRG1",
          "Data",
          "on",
          "\"",
          "WS-Invoice-Record",
          "(K:L)",
          "\"",
          "RG=\"",
          "WS-Sil-Line",
          "into",
          "WS-File-Key",
          "end-string",
          "end-if",
          "perform",
          "ba999-End"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 2604,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "Ws-Mysql-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "end-if",
          "move",
          "spaces",
          "to",
          "WS-File-Key",
          "move",
          "WS-MYSQL-COUNT-ROWS",
          "to",
          "WS-Temp-ED-Row",
          "string",
          "\"Delete",
          "for",
          "\"",
          "WS-Invoice-Record",
          "(K:L)",
          "\"",
          "only",
          "found",
          "(rg01)",
          "\"",
          "WS-Temp-ED-Row",
          "\"",
          "Rows\"",
          "into",
          "WS-File-Key",
          "end-string",
          "go",
          "to",
          "ba999-End",
          "else",
          "move",
          "spaces",
          "to",
          "SQL-Msg",
          "SQL-State",
          "move",
          "zero",
          "to",
          "SQL-Err",
          "end-if"
        ]
      },
      {
        "target": "MySQL_query",
        "line": 2650,
        "type": "DYNAMIC",
        "using": [
          "SQLCA-STATEMENT",
          "*>",
          "*>",
          "So",
          "if",
          "this",
          "does",
          "not",
          "work,",
          "it",
          "will",
          "be",
          "changed"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 2701,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "Ws-Mysql-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "move",
          "99",
          "to",
          "fs-reply",
          "move",
          "995",
          "to",
          "WE-Error",
          "end-if",
          "perform",
          "ba999-End",
          "go",
          "to",
          "bc085-Exit",
          "else",
          "*>",
          "of",
          "course",
          "there",
          "could",
          "be",
          "no",
          "data",
          "in",
          "table",
          "move",
          "spaces",
          "to",
          "SQL-Msg",
          "move",
          "zero",
          "to",
          "SQL-Err",
          "end-if"
        ]
      },
      {
        "target": "MySQL_errno",
        "line": 2754,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-Error-Number",
          "call",
          "\"MySQL_sqlstate\"",
          "using",
          "WS-MYSQL-SQLstate",
          "move",
          "WS-MYSQL-SqlState",
          "to",
          "SQL-State",
          "if",
          "WS-MYSQL-Error-Number",
          "not",
          "=",
          "\"0",
          "\"",
          "call",
          "\"MySQL_error\"",
          "using",
          "Ws-Mysql-Error-Message",
          "move",
          "WS-MYSQL-Error-Number",
          "to",
          "SQL-Err",
          "move",
          "WS-MYSQL-Error-Message",
          "to",
          "SQL-Msg",
          "end-if",
          "move",
          "99",
          "to",
          "fs-reply",
          "*>",
          "this",
          "may",
          "need",
          "changing",
          "for",
          "val",
          "in",
          "WE-Error!!",
          "move",
          "994",
          "to",
          "WE-Error",
          "perform",
          "ba999-End",
          "go",
          "to",
          "bc090-Exit",
          "end-if",
          "move",
          "zero",
          "to",
          "FS-Reply",
          "WE-Error",
          "SQL-Err"
        ]
      },
      {
        "target": "MySQL_free_result",
        "line": 3246,
        "type": "DYNAMIC",
        "using": [
          "WS-MYSQL-RESULT",
          "end-call",
          "*>",
          "/MYSQL-END\\",
          "set",
          "Cursor-Not-Active-2",
          "to",
          "true"
        ]
      },
      {
        "target": "fhlogger",
        "line": 3253,
        "type": "DYNAMIC",
        "using": [
          "File-Access",
          "ACAS-DAL-Common-data"
        ]
      }
    ],
    "copies": [
      {
        "name": "of",
        "line": 247,
        "replacing": null
      },
      {
        "name": "envdiv",
        "line": 254,
        "replacing": null
      },
      {
        "name": "mysql-variables",
        "line": 384,
        "replacing": null
      },
      {
        "name": "wsfnctn",
        "line": 446,
        "replacing": null
      },
      {
        "name": "Test-Data-Flags",
        "line": 450,
        "replacing": null
      },
      {
        "name": "slwsinv",
        "line": 455,
        "replacing": null
      },
      {
        "name": "mysql-procedures",
        "line": 1419,
        "replacing": null
      }
    ],
    "performs": [
      {
        "target": "MYSQL-1000-OPEN",
        "thru": "MYSQL-1090-EXIT",
        "line": 568
      },
      {
        "target": "MYSQL-1000-OPEN",
        "thru": "MYSQL-1090-EXIT",
        "line": 595
      },
      {
        "target": "ba998-Free",
        "thru": null,
        "line": 611
      },
      {
        "target": "MYSQL-1980-CLOSE",
        "thru": "MYSQL-1999-EXIT",
        "line": 619
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 669
      },
      {
        "target": "MYSQL-1220-STORE-RESULT",
        "thru": "MYSQL-1239-EXIT",
        "line": 670
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 702
      },
      {
        "target": "bc050-Process-Read-Indexed",
        "thru": "bc059-Exit",
        "line": 727
      },
      {
        "target": "bb100-UnloadHVs",
        "thru": null,
        "line": 818
      },
      {
        "target": "bc050-Process-Read-Indexed",
        "thru": "bc059-Exit",
        "line": 829
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 866
      },
      {
        "target": "MYSQL-1220-STORE-RESULT",
        "thru": "MYSQL-1239-EXIT",
        "line": 867
      },
      {
        "target": "bb100-UnloadHVs",
        "thru": null,
        "line": 937
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 939
      },
      {
        "target": "ba998-Free",
        "thru": null,
        "line": 942
      },
      {
        "target": "ba998-Free",
        "thru": null,
        "line": 960
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 1020
      },
      {
        "target": "MYSQL-1220-STORE-RESULT",
        "thru": "MYSQL-1239-EXIT",
        "line": 1021
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 1051
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 1092
      },
      {
        "target": "MYSQL-1220-STORE-RESULT",
        "thru": "MYSQL-1239-EXIT",
        "line": 1093
      },
      {
        "target": "bc070-Process-Write",
        "thru": "bc070-Exit",
        "line": 1150
      },
      {
        "target": "bb000-HV-Load",
        "thru": null,
        "line": 1155
      },
      {
        "target": "bb200-Insert",
        "thru": null,
        "line": 1163
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 1180
      },
      {
        "target": "bc080-Process-Delete",
        "thru": "bc080-Exit",
        "line": 1192
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 1229
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 1247
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 1326
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 1346
      },
      {
        "target": "bc085-Process-Delete-ALL",
        "thru": "bc085-Exit",
        "line": 1350
      },
      {
        "target": "bc090-Process-ReWrite",
        "thru": "bc090-Exit",
        "line": 1359
      },
      {
        "target": "bb000-HV-Load",
        "thru": null,
        "line": 1364
      },
      {
        "target": "bb300-Update",
        "thru": null,
        "line": 1383
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 1406
      },
      {
        "target": "Ca-Process-Logs",
        "thru": null,
        "line": 1438
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 1941
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 2351
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 2427
      },
      {
        "target": "MYSQL-1220-STORE-RESULT",
        "thru": "MYSQL-1239-EXIT",
        "line": 2428
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 2463
      },
      {
        "target": "bc100-UnloadHVs-rg1",
        "thru": null,
        "line": 2497
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 2516
      },
      {
        "target": "bc000-HV-Load-rg1",
        "thru": null,
        "line": 2523
      },
      {
        "target": "bc200-Insert-rg1",
        "thru": null,
        "line": 2530
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 2558
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 2598
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 2627
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 2690
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 2711
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 2718
      },
      {
        "target": "bc000-HV-Load-rg1",
        "thru": null,
        "line": 2726
      },
      {
        "target": "bc300-Update-rg1",
        "thru": null,
        "line": 2747
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 2764
      },
      {
        "target": "ba999-End",
        "thru": null,
        "line": 2771
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 3034
      },
      {
        "target": "MYSQL-1210-COMMAND",
        "thru": "MYSQL-1219-EXIT",
        "line": 3231
      }
    ]
  },
  "dataFlow": {
    "files": [],
    "moves": [
      {
        "from": "24",
        "to": "ws-env-lines ws-lines\n     else\n              move  ws-env-lines to ws-lines\n     end-if\n*> Force Esc, PgUp, PgDown, PrtSC to be detected\n     set      ENVIRONMENT \"COB_SCREEN_EXCEPTIONS\" to \"Y\"",
        "line": 485
      },
      {
        "from": "zero",
        "to": "SQL-State",
        "line": 498
      },
      {
        "from": "spaces",
        "to": "WS-MYSQL-Error-Message\n                        WS-MYSQL-Error-Number\n                        WS-Log-Where\n                        WS-File-Key\n                        SQL-Msg\n                        SQL-Err",
        "line": 503
      },
      {
        "from": "1",
        "to": "ws-No-Paragraph",
        "line": 594
      },
      {
        "from": "2",
        "to": "ws-No-Paragraph",
        "line": 613
      },
      {
        "from": "spaces",
        "to": "WS-Where\n              move     1   to J\n              string   \"`\"                   delimited by size\n                       KeyName (KOR-x1)      delimited by space\n                       \"`\"                   delimited by size\n                       \" >= \"                delimited by size\n                       '\"0000000000\"'        delimited by size  *> for 1st time active only\n                       ' ORDER BY '          delimited by size\n                       \"`\"                   delimited by size\n                       keyname (KOR-x1)      delimited by space\n                       \"`\"                   delimited by size\n                         ' ASC'              delimited by size\n                                      into ws-Where\n                                      with pointer J\n              end-string\n*>\n              move     ws-Where (1:J)   to WS-Log-Where       *>  For test logging\n              move     3 to ws-No-Paragraph\n*>               /MYSQL SELECT\\\n*>\n*>    Select rows\n*>\n*>                    TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"SELECT * FROM \"\n             \"`SAINVOICE-REC`\"\n             \" WHERE \"\n             ws-Where (1:J)\n            \";\"  X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n           PERFORM MYSQL-1220-STORE-RESULT THRU MYSQL-1239-EXIT\n           MOVE WS-MYSQL-RESULT TO TP-SAINVOICE-REC\n*>               /MYSQL-END\\\n           move    \"0000000000\" to WS-File-Key\n              if    Testing-2\n                    display Display-Message-1 with erase eos\n              end-if\n*>\n*>  It could be an empty table so test for it\n*>\n              if       WS-MYSQL-Count-Rows = zero\n                       call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n                       call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n                       move  WS-MYSQL-SqlState   to SQL-State\n                       if    WS-MYSQL-Error-Number  not = \"0  \"    *> set non '0' if no rows ?\n                             move WS-MYSQL-Error-Number to SQL-Err\n                             call \"MySQL_error\" using WS-MYSQL-Error-Message\n                             move WS-MYSQL-Error-Message to SQL-Msg\n                       end-if       *> do not really need to do this meaning the above CALL\n                       move 10 to fs-reply\n                       move 10 to WE-Error        *> should be 0 'JIC' likewise the others\n                       move    \"No Data\" to WS-File-Key\n                       go to ba999-End       *> can clear the dup code after testing\n              end-if                         *> We have data\n              set      Cursor-Active to true\n              move     WS-MYSQL-Count-Rows to WS-Temp-ED-Row\n              move    spaces to WS-File-Key\n              string   \"> 0 got cnt=\" delimited by size\n                       WS-Temp-ED-Row delimited by size\n                       \" recs for INVOICE-REC Table\"\n                        into WS-File-Key\n              end-string\n              perform ba999-End                         *> log it\n     end-if",
        "line": 640
      },
      {
        "from": "spaces",
        "to": "WS-Log-Where",
        "line": 709
      },
      {
        "from": "4",
        "to": "ws-No-Paragraph",
        "line": 710
      },
      {
        "from": "zero",
        "to": "return-code",
        "line": 711
      },
      {
        "from": "WS-Last-Read-Invoice",
        "to": "WS-Sih-Invoice\n              perform bc050-Process-Read-Indexed thru bc059-Exit\n              if     fs-Reply not = zero    *> = 23    *> no row found\n                     initialise WS-Invoice-Record\n                     move spaces to WS-File-Key\n                     string WS-Invoice-Key\n                            \" Not Found\"\n                                 into WS-File-Key\n                     end-string\n                     go to ba999-End        *> This should NOT happen\n              else     *> got a row\n                     move WS-Sih-Test to WS-Last-Read-Line\n                     go to ba999-End\n              end-if\n     end-if",
        "line": 726
      },
      {
        "from": "TP-SAINVOICE-REC",
        "to": "WS-MYSQL-RESULT\n           CALL \"MySQL_fetch_record\" USING WS-MYSQL-RESULT\n                    HV-SINVOICE-KEY\n                    HV-IH-INVOICE\n                    HV-IH-TEST\n                    HV-IH-CUSTOMER\n                    HV-IH-DAT\n                    HV-IH-ORDER\n                    HV-IH-TYPE\n                    HV-IH-REF\n                    HV-IH-DESCRIPTION\n                    HV-IH-P-C\n                    HV-IH-NET\n                    HV-IH-EXTRA\n                    HV-IH-CARRIAGE\n                    HV-IH-VAT\n                    HV-IH-DISCOUNT\n                    HV-IH-E-VAT\n                    HV-IH-C-VAT\n                    HV-IH-STATUS\n                    HV-IH-STATUS-P\n                    HV-IH-STATUS-L\n                    HV-IH-STATUS-C\n                    HV-IH-STATUS-A\n                    HV-IH-STATUS-I\n                    HV-IH-DEDUCT-DAYS\n                    HV-IH-DEDUCT-AMT\n                    HV-IH-DEDUCT-VAT\n                    HV-IH-DAYS\n                    HV-IH-CR\n                    HV-IH-LINES\n                    HV-IH-DAY-BOOK-FLAG\n                    HV-IH-UPDATE\n\n*>      /MYSQL-END\\\n     end-call\n*>\n     if       return-code = -1     *> no more data so free cursor & return\n              move 10 to fs-Reply\n                         WE-Error      *> should be 0 likewise the others\n              move    \"EOF\" to WS-File-Key\n              set Cursor-Not-Active to true\n              go to ba999-End\n     end-if\n*>\n     if       WS-MYSQL-Count-Rows = zero   *> no data but should not happen here\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using WS-MYSQL-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err   *> Not really needed but help for testing\n                    move WS-MYSQL-Error-Message to SQL-Msg   *>  ditto\n                    initialize WS-Invoice-Record with filler\n                   move    \"EOF2\" to WS-File-Key\n              end-if\n              move 10 to fs-reply                  *> EOF equivilent !!\n              move 10 to WE-Error\n              set Cursor-Not-Active to true\n              go to ba999-End\n     end-if",
        "line": 750
      },
      {
        "from": "\"EOF3\"",
        "to": "WS-File-Key\n              go to ba999-End\n     end-if",
        "line": 814
      },
      {
        "from": "WS-Invoice-Key",
        "to": "WS-File-Key",
        "line": 819
      },
      {
        "from": "zero",
        "to": "fs-reply WE-Error",
        "line": 820
      },
      {
        "from": "spaces",
        "to": "WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Where (1:J)   to WS-Log-Where",
        "line": 839
      },
      {
        "from": "5",
        "to": "ws-No-Paragraph\n*>      /MYSQL SELECT\\\n*>\n*>    Select rows\n*>\n*>             TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"SELECT * FROM \"\n             \"`SAINVOICE-REC`\"\n             \" WHERE \"\n             WS-Where (1:J)\n            \";\"  X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n           PERFORM MYSQL-1220-STORE-RESULT THRU MYSQL-1239-EXIT\n           MOVE WS-MYSQL-RESULT TO TP-SAINVOICE-REC\n*>      /MYSQL-END\\\n*>\n     if     WS-MYSQL-Count-Rows = zero\n            move 23  to fs-Reply             *> could also be 21 or 14\n            move zero to WE-Error\n            go to ba998-Free\n     end-if\n     move     6 to ws-No-Paragraph\n*>      /MYSQL FETCH\\\n*>\n*>    Fetch next record\n*>\n*>             TABLE=SAINVOICE-REC\n           MOVE TP-SAINVOICE-REC TO WS-MYSQL-RESULT\n           CALL \"MySQL_fetch_record\" USING WS-MYSQL-RESULT\n                    HV-SINVOICE-KEY\n                    HV-IH-INVOICE\n                    HV-IH-TEST\n                    HV-IH-CUSTOMER\n                    HV-IH-DAT\n                    HV-IH-ORDER\n                    HV-IH-TYPE\n                    HV-IH-REF\n                    HV-IH-DESCRIPTION\n                    HV-IH-P-C\n                    HV-IH-NET\n                    HV-IH-EXTRA\n                    HV-IH-CARRIAGE\n                    HV-IH-VAT\n                    HV-IH-DISCOUNT\n                    HV-IH-E-VAT\n                    HV-IH-C-VAT\n                    HV-IH-STATUS\n                    HV-IH-STATUS-P\n                    HV-IH-STATUS-L\n                    HV-IH-STATUS-C\n                    HV-IH-STATUS-A\n                    HV-IH-STATUS-I\n                    HV-IH-DEDUCT-DAYS\n                    HV-IH-DEDUCT-AMT\n                    HV-IH-DEDUCT-VAT\n                    HV-IH-DAYS\n                    HV-IH-CR\n                    HV-IH-LINES\n                    HV-IH-DAY-BOOK-FLAG\n                    HV-IH-UPDATE\n\n*>      /MYSQL-END\\\n     end-call\n*>\n     if       WS-MYSQL-Count-Rows not > zero\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    move 990 to WE-Error\n                    call \"MySQL_error\" using WS-MYSQL-Error-Message\n                    move WS-MYSQL-Error-Number to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              else\n                    move 989  to WE-Error\n                    move zero to SQL-Err\n                    move spaces to SQL-Msg\n              end-if\n              move 23   to fs-reply\n              move spaces to WS-File-Key\n              go to ba998-Free\n     end-if                        *> row count zero should show up as a MYSQL error ?\n     perform bb100-UnloadHVs       *> transfer/move HV vars to ws-Record layout\n     move     HV-SINVOICE-KEY to WS-File-Key",
        "line": 854
      },
      {
        "from": "zero",
        "to": "FS-Reply WE-Error",
        "line": 941
      },
      {
        "from": "99",
        "to": "FS-Reply\n              move 997 to WE-Error                     *> Invalid calling parameter settings     997\n              go to ba999-end\n     end-if\n*>\n*>  First clear any active cursors\n*>\n     if       Cursor-Active\n              perform ba998-Free",
        "line": 952
      },
      {
        "from": "spaces",
        "to": "MOST-Relation",
        "line": 971
      },
      {
        "from": "1",
        "to": "J",
        "line": 972
      },
      {
        "from": "spaces",
        "to": "WS-Where\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              MOST-relation         delimited by space\n              '\"'                   delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n              ' ORDER BY '          delimited by size\n              \"`\"                   delimited by size\n              keyname (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n                ' ASC  '            delimited by size\n                             into WS-Where\n                             with pointer J\n     end-string\n     move     WS-Where (1:J)  to WS-Log-Where",
        "line": 986
      },
      {
        "from": "8",
        "to": "ws-No-Paragraph\n*>      /MYSQL SELECT\\\n*>\n*>    Select rows\n*>\n*>             TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"SELECT * FROM \"\n             \"`SAINVOICE-REC`\"\n             \" WHERE \"\n             WS-Where (1:J)\n            \";\"  X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n           PERFORM MYSQL-1220-STORE-RESULT THRU MYSQL-1239-EXIT\n           MOVE WS-MYSQL-RESULT TO TP-SAINVOICE-REC\n*>      /MYSQL-END\\\n*>\n     if       WS-MYSQL-Count-Rows not zero\n              set Cursor-Active to true\n     end-if\n*>\n     if       WS-MYSQL-Count-Rows = zero\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using WS-MYSQL-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 21 to fs-reply                  *> this may need changing for val in WE-Error!!\n              move zero to WE-Error\n     else\n              move  zero to FS-Reply WE-Error\n              move     WS-MYSQL-Count-Rows to WS-Temp-ED-Row\n              string   MOST-relation\n                       WS-Invoice-Record (K:L)\n                       \" got \" delimited by size\n                       WS-Temp-ED-Row delimited by size\n                       \" recs\"\n                        into WS-File-Key\n              end-string\n     end-if\n     perform  ba999-End",
        "line": 1008
      },
      {
        "from": "1",
        "to": "J2",
        "line": 1058
      },
      {
        "from": "spaces",
        "to": "WS-Where-2",
        "line": 1059
      },
      {
        "from": "WS-Mysql-Result",
        "to": "WS-Mysql-Save-Result",
        "line": 1076
      },
      {
        "from": "WS-Mysql-Count-Rows",
        "to": "WS-Mysql-Save-Count-Rows",
        "line": 1077
      },
      {
        "from": "zero",
        "to": "WS-Mysql-Count-Rows",
        "line": 1078
      },
      {
        "from": "57",
        "to": "ws-No-Paragraph\n*>      /MYSQL SELECT\\\n*>\n*>    Select rows\n*>\n*>             TABLE=SAINV-LINES-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"SELECT * FROM \"\n             \"`SAINV-LINES-REC`\"\n             \" WHERE \"\n             WS-Where-2 (1:J2)\n            \";\"  X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n           PERFORM MYSQL-1220-STORE-RESULT THRU MYSQL-1239-EXIT\n           MOVE WS-MYSQL-RESULT TO TP-SAINV-LINES-REC\n*>      /MYSQL-END\\\n*>\n     if       WS-MYSQL-Count-Rows not zero\n              set Cursor-Active-2 to true\n     else\n              set Cursor-Not-Active-2 to true\n     end-if\n*>\n*> Should not be zero for invoice Line table if still unposted and cleared",
        "line": 1080
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using WS-MYSQL-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 21 to fs-reply                  *> this may need changing for val in WE-Error!!\n              move zero to WE-Error\n     else\n              move  zero to FS-Reply WE-Error\n              move     WS-MYSQL-Count-Rows to WS-Temp-ED-Row\n              string   MOST-relation\n                       WS-Invoice-Record (K2:L2)\n                       \" got \" delimited by size\n                       WS-Temp-ED-Row delimited by size\n                       \" recs RG1 (Lines)\"\n                        into WS-File-Key\n              end-string\n     end-if\n*>\n*>  Save pointer and count for RG1 also Cursor2 active (or not )\n*>\n*>  ALL this does depend on application code  in slnnn ???? <<<<<<<\n*>\n     move     WS-Mysql-Result to WS-Mysql-Save-Result-RG1",
        "line": 1108
      },
      {
        "from": "WS-Mysql-Count-Rows",
        "to": "WS-Mysql-Save-Count-Rows-RG1",
        "line": 1133
      },
      {
        "from": "WS-Mysql-Save-Result",
        "to": "WS-Mysql-Result",
        "line": 1137
      },
      {
        "from": "WS-Mysql-Save-Count-Rows",
        "to": "WS-Mysql-Count-Rows",
        "line": 1138
      },
      {
        "from": "WS-Invoice-Key",
        "to": "WS-File-Key",
        "line": 1156
      },
      {
        "from": "zero",
        "to": "FS-Reply\n                      WE-Error\n                      SQL-State",
        "line": 1157
      },
      {
        "from": "spaces",
        "to": "SQL-Msg\n     move     zero to SQL-Err\n     move     10 to ws-No-Paragraph",
        "line": 1160
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              move  99 to fs-reply                  *> this may need changing for val in WE-Error!!\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n                    if    Sql-State = \"23000\"      *> Dup key\n                       or SQL-Err (1:4) = \"1062\"   *> Ditto, ditto\n                                     or = \"1022\"\n                          move 22 to fs-reply\n                    end-if\n              end-if\n     end-if\n     perform  ba999-End",
        "line": 1167
      },
      {
        "from": "spaces",
        "to": "WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Invoice-Record (K:L)  to WS-File-Key",
        "line": 1201
      },
      {
        "from": "13",
        "to": "ws-No-Paragraph",
        "line": 1217
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 99 to fs-reply\n              move 995 to WE-Error\n              go to ba999-End\n     else\n              move spaces to SQL-Msg\n              move zero   to SQL-Err\n     end-if",
        "line": 1234
      },
      {
        "from": "zero",
        "to": "FS-Reply WE-Error",
        "line": 1249
      },
      {
        "from": "LOW-VALUES",
        "to": "SQLCA-STATEMENT",
        "line": 1270
      },
      {
        "from": "LOW-VALUES",
        "to": "SQLCA-STATEMENT",
        "line": 1279
      },
      {
        "from": "spaces",
        "to": "WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size          *> was '<\"'\n              WS-Invoice-Record (K:L)    delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     spaces to WS-File-Key\n     move     WS-Invoice-Key to WS-File-Key\n     move     WS-Where (1:J)   to WS-Log-Where",
        "line": 1297
      },
      {
        "from": "15",
        "to": "ws-No-Paragraph",
        "line": 1314
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 99  to fs-reply\n              move 995 to WE-Error\n              go to ba999-End\n     else      *> of course there could be no data in table\n              move spaces to SQL-Msg\n              move zero   to SQL-Err\n     end-if",
        "line": 1331
      },
      {
        "from": "zero",
        "to": "FS-Reply\n                      WE-Error",
        "line": 1344
      },
      {
        "from": "WS-Invoice-Key",
        "to": "WS-File-Key",
        "line": 1365
      },
      {
        "from": "17",
        "to": "ws-No-Paragraph",
        "line": 1366
      },
      {
        "from": "spaces",
        "to": "WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Where (1:J)   to WS-Log-Where",
        "line": 1371
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 99 to fs-reply                  *> this may need changing for val in WE-Error!!\n              move 994 to WE-Error\n              go to ba999-End\n     end-if\n     move     zero   to FS-Reply\n                        WE-Error\n                        SQL-Err",
        "line": 1392
      },
      {
        "from": "spaces",
        "to": "SQL-Msg",
        "line": 1405
      },
      {
        "from": "990",
        "to": "WE-Error",
        "line": 1414
      },
      {
        "from": "99",
        "to": "Fs-Reply",
        "line": 1415
      },
      {
        "from": "20",
        "to": "ws-No-Paragraph",
        "line": 1423
      },
      {
        "from": "TP-SAINVOICE-REC",
        "to": "WS-MYSQL-RESULT\n           CALL \"MySQL_free_result\" USING WS-MYSQL-RESULT end-call\n*>      /MYSQL-END\\\n     set      Cursor-Not-Active to true",
        "line": 1429
      },
      {
        "from": "WS-Invoice-Key",
        "to": "HV-SINVOICE-KEY",
        "line": 1454
      },
      {
        "from": "WS-Sih-Invoice",
        "to": "HV-IH-INVOICE",
        "line": 1456
      },
      {
        "from": "WS-Sih-Test",
        "to": "HV-IH-TEST",
        "line": 1457
      },
      {
        "from": "WS-Sih-Customer",
        "to": "HV-IH-CUSTOMER\n     move     WS-Sih-Date          to HV-IH-DAT\n     move     WS-Sih-Order         to HV-IH-ORDER\n     move     WS-Sih-Type          to HV-IH-TYPE\n     move     WS-Sih-Ref           to HV-IH-REF\n     move     WS-Sih-Description   to HV-IH-DESCRIPTION\n     move     WS-Sih-P-C           to HV-IH-P-C\n     move     WS-Sih-Net           to HV-IH-NET\n     move     WS-Sih-Extra         to HV-IH-EXTRA\n     move     WS-Sih-Carriage      to HV-IH-CARRIAGE\n     move     WS-Sih-Vat           to HV-IH-VAT\n     move     WS-Sih-Discount      to HV-IH-DISCOUNT\n     move     WS-Sih-E-Vat         to HV-IH-E-VAT\n     move     WS-Sih-C-Vat         to HV-IH-C-VAT\n     move     WS-Sih-Status        to HV-IH-STATUS\n     move     WS-Sih-Status-P      to HV-IH-STATUS-P\n     move     WS-Sih-Status-L      to HV-IH-STATUS-L\n     move     WS-Sih-Status-C      to HV-IH-STATUS-C\n     move     WS-Sih-Status-A      to HV-IH-STATUS-A\n     move     WS-Sih-Status-I      to HV-IH-STATUS-I\n     move     WS-Sih-Lines         to HV-IH-LINES\n     move     WS-Sih-Deduct-Days   to HV-IH-DEDUCT-DAYS\n     move     WS-Sih-Deduct-Amt    to HV-IH-DEDUCT-AMT\n     move     WS-Sih-Deduct-Vat    to HV-IH-DEDUCT-VAT\n     move     WS-Sih-Days          to HV-IH-DAYS\n     move     WS-Sih-CR            to HV-IH-CR\n     move     WS-Sih-Day-Book-Flag to HV-IH-DAY-BOOK-FLAG\n     move     WS-Sih-Update        to HV-IH-UPDATE",
        "line": 1458
      },
      {
        "from": "HV-IH-INVOICE",
        "to": "WS-Sih-Invoice\n     move     HV-IH-TEST       to WS-Sih-Test\n     move     HV-IH-CUSTOMER      to WS-Sih-Customer\n     move     HV-IH-DAT           to WS-Sih-Date\n     move     HV-IH-ORDER         to WS-Sih-Order\n     move     HV-IH-TYPE          to WS-Sih-Type\n     move     HV-IH-REF           to WS-Sih-Ref\n     move     HV-IH-DESCRIPTION   to WS-Sih-Description\n     move     HV-IH-P-C           to WS-Sih-P-C\n     move     HV-IH-NET           to WS-Sih-Net\n     move     HV-IH-EXTRA         to WS-Sih-Extra\n     move     HV-IH-CARRIAGE      to WS-Sih-Carriage\n     move     HV-IH-VAT           to WS-Sih-Vat\n     move     HV-IH-DISCOUNT      to WS-Sih-Discount\n     move     HV-IH-E-VAT         to WS-Sih-E-Vat\n     move     HV-IH-C-VAT         to WS-Sih-C-Vat\n     move     HV-IH-STATUS        to WS-Sih-Status\n     move     HV-IH-STATUS-P      to WS-Sih-Status-P\n     move     HV-IH-STATUS-L      to WS-Sih-Status-L\n     move     HV-IH-STATUS-C      to WS-Sih-Status-C\n     move     HV-IH-STATUS-A      to WS-Sih-Status-A\n     move     HV-IH-STATUS-I      to WS-Sih-Status-I\n     move     HV-IH-LINES         to WS-Sih-Lines\n     move     HV-IH-DEDUCT-DAYS   to WS-Sih-Deduct-Days\n     move     HV-IH-DEDUCT-AMT    to WS-Sih-Deduct-Amt\n     move     HV-IH-DEDUCT-VAT    to WS-Sih-Deduct-Vat\n     move     HV-IH-DAYS          to WS-Sih-Days\n     move     HV-IH-CR            to WS-Sih-CR\n     move     HV-IH-DAY-BOOK-FLAG to WS-Sih-Day-Book-Flag\n     move     HV-IH-UPDATE        to WS-Sih-Update",
        "line": 1497
      },
      {
        "from": "HV-IH-LINES",
        "to": "WS-Actual-Lines-In-Row",
        "line": 1532
      },
      {
        "from": "HV-IH-INVOICE",
        "to": "WS-Last-Read-Invoice",
        "line": 1536
      },
      {
        "from": "HV-IH-TEST",
        "to": "WS-Last-Read-Line",
        "line": 1537
      },
      {
        "from": "1",
        "to": "WS-MYSQL-I\n           STRING 'INSERT INTO '\n                    '`SAINVOICE-REC` SET '\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`SINVOICE-KEY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-SINVOICE-KEY,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-INVOICE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-INVOICE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-TEST`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-TEST\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CUSTOMER`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-CUSTOMER,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-ORDER`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-ORDER,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-TYPE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-TYPE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-REF`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-REF,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DESCRIPTION`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-DESCRIPTION,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-P-C`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-P-C\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1551
      },
      {
        "from": "HV-IH-NET",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1669
      },
      {
        "from": "HV-IH-EXTRA",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1686
      },
      {
        "from": "HV-IH-CARRIAGE",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1703
      },
      {
        "from": "HV-IH-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1720
      },
      {
        "from": "HV-IH-DISCOUNT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1737
      },
      {
        "from": "HV-IH-E-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1754
      },
      {
        "from": "HV-IH-C-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1771
      },
      {
        "from": "HV-IH-DEDUCT-DAYS",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DEDUCT-AMT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DEDUCT-AMT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1842
      },
      {
        "from": "HV-IH-DEDUCT-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1871
      },
      {
        "from": "HV-IH-DAYS",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CR`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-CR\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-LINES`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-LINES\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAY-BOOK-FLAG`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-DAY-BOOK-FLAG,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-UPDATE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-UPDATE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING \";\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING X\"00\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n       PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>  /MYSQL-END\\\n       ",
        "line": 1888
      },
      {
        "from": "1",
        "to": "WS-MYSQL-I\n           STRING 'UPDATE '\n                    '`SAINVOICE-REC` SET '\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`SINVOICE-KEY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-SINVOICE-KEY,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-INVOICE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-INVOICE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-TEST`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-TEST\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CUSTOMER`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-CUSTOMER,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-ORDER`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-ORDER,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-TYPE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-TYPE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-REF`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-REF,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DESCRIPTION`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-DESCRIPTION,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-P-C`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-P-C\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 1957
      },
      {
        "from": "HV-IH-NET",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2075
      },
      {
        "from": "HV-IH-EXTRA",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2092
      },
      {
        "from": "HV-IH-CARRIAGE",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2109
      },
      {
        "from": "HV-IH-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2126
      },
      {
        "from": "HV-IH-DISCOUNT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2143
      },
      {
        "from": "HV-IH-E-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2160
      },
      {
        "from": "HV-IH-C-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2177
      },
      {
        "from": "HV-IH-DEDUCT-DAYS",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DEDUCT-AMT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DEDUCT-AMT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2248
      },
      {
        "from": "HV-IH-DEDUCT-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2277
      },
      {
        "from": "HV-IH-DAYS",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CR`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-CR\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-LINES`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-LINES\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAY-BOOK-FLAG`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-DAY-BOOK-FLAG,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-UPDATE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-UPDATE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING \" WHERE \"\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (WS-Where (1:J))\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n           STRING \";\" X\"00\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>  /MYSQL-END\\\n       ",
        "line": 2294
      },
      {
        "from": "WS-Mysql-Result",
        "to": "WS-Mysql-Save-Result",
        "line": 2386
      },
      {
        "from": "WS-Mysql-Count-Rows",
        "to": "WS-Mysql-Save-Count-Rows",
        "line": 2387
      },
      {
        "from": "zero",
        "to": "WS-Mysql-Count-Rows",
        "line": 2388
      },
      {
        "from": "spaces",
        "to": "WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)    delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string",
        "line": 2400
      },
      {
        "from": "51",
        "to": "ws-No-Paragraph",
        "line": 2415
      },
      {
        "from": "WS-MYSQL-RESULT",
        "to": "TP-SAINV-LINES-REC\n*>      /MYSQL-END\\\n*>\n*> Test for no data but this should not happen - Bug in code somewhere\n*>  when inserting it",
        "line": 2429
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              if      WS-MYSQL-Error-Number  not = \"0  \"    *> set non '0' if no rows ?\n                      move WS-MYSQL-Error-Number to SQL-Err\n                      call \"MySQL_error\" using WS-MYSQL-Error-Message\n                      move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move    23  to fs-reply\n              move    890 to WE-Error\n              move    spaces to WS-File-Key\n              string  \"No RG1 Data for \"\n                      WS-Invoice-Record (K:L)\n                        into WS-File-Key\n              end-string\n              initialise WS-Invoice-Record       *> Clear both in case called does not spot end of\n                         WS-Invoice-Line         *> data for Invoice and to help debugging if so\n              go      to bc058-Restore-Pointers  *> do ba999-end at end\n     end-if\n*>\n     move     WS-MYSQL-Count-Rows to WS-Temp-ED-Row",
        "line": 2438
      },
      {
        "from": "52",
        "to": "ws-No-Paragraph\n*>      /MYSQL FETCH\\\n*>\n*>    Fetch next record\n*>\n*>             TABLE=SAINV-LINES-REC\n           MOVE TP-SAINV-LINES-REC TO WS-MYSQL-RESULT\n           CALL \"MySQL_fetch_record\" USING WS-MYSQL-RESULT\n                    HV1-IL-LINE-KEY\n                    HV1-IL-INVOICE\n                    HV1-IL-LINE\n                    HV1-IL-PRODUCT\n                    HV1-IL-PA\n                    HV1-IL-QTY\n                    HV1-IL-TYPE\n                    HV1-IL-DESCRIPTION\n                    HV1-IL-NET\n                    HV1-IL-UNIT\n                    HV1-IL-DISCOUNT\n                    HV1-IL-VAT\n                    HV1-IL-VAT-CODE\n                    HV1-IL-UPDATE\n\n*>      /MYSQL-END\\\n     end-call\n*>\n     if       WS-MYSQL-Count-Rows  > zero\n*> transfer/move HV1 vars to ws-Invoice-Line then to ws-Invoice-Record\n              perform  bc100-UnloadHVs-rg1\n              move     WS-Invoice-Line to WS-Invoice-Record\n     else\n              initialise WS-Invoice-Line   *> Incase called does not spot no more data for invoice",
        "line": 2469
      },
      {
        "from": "23",
        "to": "FS-Reply\n     end-if\n*>\n*> No more rows for key\n*>\n     move     WS-Invoice-Record (K:L) to WS-File-Key",
        "line": 2502
      },
      {
        "from": "zero",
        "to": "FS-Reply WE-Error",
        "line": 2508
      },
      {
        "from": "WS-Mysql-Save-Result",
        "to": "WS-Mysql-Result",
        "line": 2514
      },
      {
        "from": "WS-Mysql-Save-Count-Rows",
        "to": "WS-Mysql-Count-Rows",
        "line": 2515
      },
      {
        "from": "WS-Invoice-Record",
        "to": "WS-Invoice-Line",
        "line": 2522
      },
      {
        "from": "WS-Invoice-Key",
        "to": "WS-File-Key",
        "line": 2524
      },
      {
        "from": "zero",
        "to": "FS-Reply WE-Error",
        "line": 2525
      },
      {
        "from": "spaces",
        "to": "SQL-Msg\n                        SQL-State",
        "line": 2526
      },
      {
        "from": "zero",
        "to": "SQL-Err",
        "line": 2528
      },
      {
        "from": "53",
        "to": "ws-No-Paragraph",
        "line": 2529
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              move  99 to fs-reply                  *> this may need changing for val in WE-Error!!\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                 or Sql-State = \"23000\"      *> Dup key (rec already present)\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n                    if   Sql-State = \"23000\"      *> Dup key (rec already present)\n                      or SQL-Err (1:4) = \"1062\"\n                      or               = \"1022\"\n                         move 22 to fs-reply\n                    else\n                         move 99 to fs-reply                  *> this may need changing for val in WE-Error!!\n                    end-if\n              end-if\n              move    spaces to WS-File-Key\n              string  \"Cant Re|WriteRG1 Data on \"\n                      WS-Invoice-Record (K:L)\n                      \" RG=\"\n                      WS-Sil-Line\n                          into WS-File-Key\n              end-string\n     end-if\n     perform ba999-End",
        "line": 2535
      },
      {
        "from": "spaces",
        "to": "WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Invoice-Record (K:L)  to WS-File-Key",
        "line": 2570
      },
      {
        "from": "54",
        "to": "ws-No-Paragraph",
        "line": 2586
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move spaces to WS-File-Key\n              move WS-MYSQL-COUNT-ROWS to WS-Temp-ED-Row\n              string \"Delete for \"\n                     WS-Invoice-Record (K:L)\n                     \" only found (rg01) \"\n                     WS-Temp-ED-Row\n                     \" Rows\"\n                          into WS-File-Key\n              end-string\n              go to ba999-End\n     else\n              move spaces to SQL-Msg SQL-State\n              move zero   to SQL-Err\n     end-if",
        "line": 2606
      },
      {
        "from": "zero",
        "to": "FS-Reply WE-Error",
        "line": 2626
      },
      {
        "from": "LOW-VALUES",
        "to": "SQLCA-STATEMENT",
        "line": 2643
      },
      {
        "from": "spaces",
        "to": "WS-Where\n     move     1   to J\n     string\n *>             \"`\"                   delimited by size\n *>             KeyName (KOR-x1)      delimited by space    *>   ?????? should be SA\n *>             \"`\"                   delimited by size\n *>             WS-Invoice-Record (K:L)    delimited by size\n*>\n              \"'IL-INVOICE'\"        delimited by size\n              '=\"'                  delimited by size      *> was '<\"'\n              WS-Sih-Invoice        delimited by size    *> Correct one ?\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     spaces to WS-File-Key\n     move     WS-Where (1:J)   to WS-Log-Where",
        "line": 2658
      },
      {
        "from": "55",
        "to": "ws-No-Paragraph",
        "line": 2678
      },
      {
        "from": "WS-MYSQL-COUNT-ROWS",
        "to": "WS-Temp-ED-Row\n     string   \"Deleting All lines in \" delimited by size\n               WS-Sih-Invoice          delimited by size\n               \" with \"\n                WS-Temp-Ed-Row (6:2)   delimited by size\n                \" lines",
        "line": 2692
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n                    move 99 to fs-reply\n                    move 995 to WE-Error\n              end-if\n              perform  ba999-End\n              go   to bc085-Exit\n     else      *> of course there could be no data in table\n              move spaces to SQL-Msg\n              move zero   to SQL-Err\n     end-if",
        "line": 2703
      },
      {
        "from": "zero",
        "to": "FS-Reply WE-Error",
        "line": 2717
      },
      {
        "from": "WS-Invoice-Record",
        "to": "WS-Invoice-Line",
        "line": 2725
      },
      {
        "from": "WS-Sil-Key",
        "to": "WS-File-Key",
        "line": 2727
      },
      {
        "from": "56",
        "to": "ws-No-Paragraph",
        "line": 2729
      },
      {
        "from": "spaces",
        "to": "WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Where (1:J)   to WS-Log-Where",
        "line": 2734
      },
      {
        "from": "WS-MYSQL-SqlState",
        "to": "SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 99 to fs-reply                  *> this may need changing for val in WE-Error!!\n              move 994 to WE-Error\n              perform ba999-End\n              go to bc090-Exit\n     end-if\n     move     zero   to FS-Reply\n                        WE-Error\n                        SQL-Err",
        "line": 2756
      },
      {
        "from": "spaces",
        "to": "SQL-Msg",
        "line": 2770
      },
      {
        "from": "WS-Sil-Key",
        "to": "HV1-IL-LINE-KEY",
        "line": 2788
      },
      {
        "from": "WS-Sil-Line",
        "to": "HV1-IL-LINE\n     move     WS-Sil-Invoice     to HV1-IL-INVOICE\n     move     WS-Sil-Product     to HV1-IL-PRODUCT\n     move     WS-Sil-Pa          to HV1-IL-PA\n     move     WS-Sil-Qty         to HV1-IL-QTY\n     move     WS-Sil-Type        to HV1-IL-TYPE\n     move     WS-Sil-Description to HV1-IL-DESCRIPTION\n     move     WS-Sil-Net         to HV1-IL-NET\n     move     WS-Sil-Unit        to HV1-IL-UNIT\n     move     WS-Sil-Discount    to HV1-IL-DISCOUNT\n     move     WS-Sil-Vat         to HV1-IL-VAT\n     move     WS-Sil-Vat-Code    to HV1-IL-VAT-CODE\n     move     WS-Sil-Update      to HV1-IL-UPDATE",
        "line": 2789
      },
      {
        "from": "HV1-IL-LINE-KEY",
        "to": "WS-Sil-Key",
        "line": 2821
      },
      {
        "from": "HV1-IL-LINE",
        "to": "WS-Sil-Line\n     move     HV1-IL-PRODUCT     to  WS-Sil-Product\n     move     HV1-IL-PA          to  WS-Sil-Pa\n     move     HV1-IL-QTY         to  WS-Sil-Qty\n     move     HV1-IL-TYPE        to  WS-Sil-Type\n     move     HV1-IL-DESCRIPTION to  WS-Sil-Description\n     move     HV1-IL-NET         to  WS-Sil-Net\n     move     HV1-IL-UNIT        to  WS-Sil-Unit\n     move     HV1-IL-DISCOUNT    to  WS-Sil-Discount\n     move     HV1-IL-VAT         to  WS-Sil-Vat\n     move     HV1-IL-VAT-CODE    to  WS-Sil-Vat-Code\n     move     HV1-IL-UPDATE      to  WS-Sil-Update",
        "line": 2822
      },
      {
        "from": "HV1-IL-Line",
        "to": "WS-Last-Read-Line",
        "line": 2837
      },
      {
        "from": "it",
        "to": "primary WS record area",
        "line": 2839
      },
      {
        "from": "WS-Invoice-Line",
        "to": "WS-Invoice-Record",
        "line": 2841
      },
      {
        "from": "1",
        "to": "WS-MYSQL-I\n           STRING 'INSERT INTO '\n                    '`SAINV-LINES-REC` SET '\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-LINE-KEY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-LINE-KEY,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-INVOICE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-INVOICE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-LINE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-LINE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-PRODUCT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-PRODUCT,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-PA`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-PA,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-QTY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-QTY\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(16:05))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-TYPE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-TYPE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-DESCRIPTION`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-DESCRIPTION,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-NET`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-NET\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2857
      },
      {
        "from": "HV1-IL-UNIT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2963
      },
      {
        "from": "HV1-IL-DISCOUNT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(19:02))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2980
      },
      {
        "from": "HV1-IL-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 2997
      },
      {
        "from": "HV1-IL-VAT-CODE",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-UPDATE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-UPDATE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING \";\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING X\"00\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n       PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>  /MYSQL-END\\\n       ",
        "line": 3014
      },
      {
        "from": "1",
        "to": "WS-MYSQL-I\n           STRING 'UPDATE '\n                    '`SAINV-LINES-REC` SET '\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-LINE-KEY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-LINE-KEY,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-INVOICE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-INVOICE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-LINE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-LINE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-PRODUCT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-PRODUCT,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-PA`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-PA,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-QTY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-QTY\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(16:05))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-TYPE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-TYPE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-DESCRIPTION`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-DESCRIPTION,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-NET`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-NET\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 3050
      },
      {
        "from": "HV1-IL-UNIT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 3156
      },
      {
        "from": "HV1-IL-DISCOUNT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(19:02))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 3173
      },
      {
        "from": "HV1-IL-VAT",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \"",
        "line": 3190
      },
      {
        "from": "HV1-IL-VAT-CODE",
        "to": "WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-UPDATE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-UPDATE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING \" WHERE \"\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (WS-Where (1:J))\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n           STRING \";\" X\"00\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>  /MYSQL-END\\\n       ",
        "line": 3207
      },
      {
        "from": "58",
        "to": "ws-No-Paragraph",
        "line": 3239
      },
      {
        "from": "TP-SAINV-LINES-REC",
        "to": "WS-MYSQL-RESULT\n           CALL \"MySQL_free_result\" USING WS-MYSQL-RESULT end-call\n*>      /MYSQL-END\\\n     set      Cursor-Not-Active-2 to true",
        "line": 3245
      }
    ],
    "computes": []
  },
  "businessLogic": {
    "conditions": [
      {
        "type": "IF",
        "condition": "*>                      zero its a main table row and if 01 - 40 is a Line item row so\n*>                      easy to work out where to write out to.\n*>\n*>                      FOR start we do for both tables saving into -RG1.\n*>                         See if we need this code  ????????\n*>\n*>                      Reading both next and indexed is a little more complex :\n*>\n*>                      Read next needs to know what the previous record key (test) was so if\n*>                      it is:\n*>                      If 00",
        "line": 46
      },
      {
        "type": "IF",
        "condition": "not 00",
        "line": 60
      },
      {
        "type": "IF",
        "condition": "read indexed if test = 00 use primary otherwise use\n*>                      line table.\n*>\n*>                      So we need to keep track of previous read key and operation ?\n*>                      and the prior key (JIC).\n*>\n*>===========================================================================\n*>\n*>                      This and associated modules relate to ACAS versions v3.02 and later.\n*>\n*>                      This modules does all file handling using RDB and is called\n*>                      from the ACAS\n*>                      Sales Invoice file handler acas016\n*>                      which in turn is called\n*>                      from each ACAS application module that requires file/RDB data handling.\n*>\n*>                      If RDBMS (Relational Database Management Systems) is in use it will be\n*>                      called by the specific module to handle similar processing as a Cobol\n*>                      flat file and will pass the equivalent\n*>                      RDB (Relational Database) row as a Cobol file record (01 level) moving\n*>                      row by row to the correct Cobol flat file fields as required.\n*>\n*>                      RDB DAL (Data Access Layer) modules are individually modified to handle:\n*>                      MS SQL server, Mysql, DB2, Postgres and Oracle as available and tested.\n*>                      These are contained in separate directories for each RDB, e.g.\n*>                       'MSSQL' (MS SQL Server), 'Mysql', 'DB2', 'Postgres'. 'Oracle'.\n*>                       You need to compile from the correct directory for the specific\n*>                       RDB you will use and have installed along with all of the development\n*>                       libraries and include files etc using the correct pre-compiler tool\n*>                       to process the Exec SQL code converting to Cobol calls etc.\n*>                       see the RDB specific ACAS notes.\n*>\n*>                      For specific SQL servers supported, the pre-compiler system is included\n*>                       where ever possible but for some, copyright reasons may prevent\n*>                       inclusion. In some cases for one specific RDB more than one precompiler\n*>                       is used as an experiment to help find the ideal one to use.\n*>\n*>                      If you wish to convert a running ACAS system over from Flat files\n*>                      to RDBMS see below.\n*>\n*>                      Depending on the RDB you wish to use there is\n*>                      also, included LMs (Load Modules) to convert each ISAM\n*>                      (Indexed Sequential) file to the rdb database tables.\n*>                      These will also need to be compiled from the\n*>                      specific LM directory that contains the rdb DAL modules.\n*>                      These will be very RDB specific.\n*>\n*>    As the MySQL versioning is the first of the DAL and FH processes being\n*>    developed all sources are in the common directory.\n*>**\n*>  File Handling:\n*>     Uses the Global Error / Access logging file within the FH acas0nn module\n*>               and in all DALs.\n*>**\n*> Called by Modules:\n*>                      acas016 - Sales Invoice Cobol Handler.\n*>\n*>**\n*> Error Messages Used.\n*>                      SM004 SQL Err no in 'mysql-procedures'\n*>                      SM901 Note error and hit return.\n*>**\n*> Version.             1.00 17/06/2016.\n*>\n*>**\n*> Changes.\n*> 04/08/16 vbc - .01 Removed file action logging to sep. module ditto acas011.\n*> 18/07/16 vbc - .02 Insert call for SQL error msg where missing and move\n*>                    spaces / zero to SQL-Msg| Err and other little fixes/cleanups.\n*>                    Remap all changes to the .scb source file.\n*> 20/07/16 vbc - .03 Close logger if testing-1 set on table close.\n*>                    branch to 999-end instead of 998-free when EOF on read next.\n*>                    Seems to auto release if end of cursor data reached\n*>                    and causes an abort ??\n*> 24/07/16 vbc -     Taken from the stockMT sources with same versioning.\n*> 30/07/16 vbc - .04 Change Open and Close to also show table name in operation.\n*> 31/07/16 vbc - .05 Moved mv spaces/zero in Write to before insert.\n*>                    Remove fhlogger file close in Process-Close.\n*>                    Forgot error 989 so commented.\n*> 10/01/17 vbc - .06 Taken from salesMT.\n*>                    Updated to support rg table needs for all Fetch, Update,\n*>                    Insert & Delete functions.\n*> 11/01/17 vbc -     Added 800 series WE-Error messages for RG processing\n*>                    for use with logging only.\n*> 27/01/17 vbc -     Taken from paymentsMT as uses a RG group.\n*> 18/08/17 vbc - .07 Updated to support fn-Read-Next-Header (34) to support\n*>                    sl020, 050 & 140. Involves minimal changes - see ba040.\n*> 01/03/18 vbc - .11 Renamed error messages to SM901, SM004 as needed.\n*> 12/07/23 vbc - .12 In bc050-Process-Read and bc300-Update-Rg1 changed to set KOR-x1 to 2\n*>                    from 'to 1'. Ditto plinvoiceMT & *autogenMT - in progress - did say\n*>                    that these have only been dry tested.......\n*> 24/07/23 vbc - .13 RG1 processing missing for (re)writes also need to check that load\n*>                    and unload is present - ditto for header records.\n*>                    New proc - bc090-Process-Rewrite used in ba090-Process-Rewrite\n*>                    fix bug where data NOT moved to/from ws-invoice-record\n*>                    and WS-Invoice-Line - I hope.\n*>                    Remove setup code in bc300-Update-rg1 as in caller.\n*> 08/08/23 vbc - .14 Table keys NOT being moved to for both tables but not from - stops overwrite keys.\n*> 16/04/24 vbc       Copyright notice update superseding all previous notices.\n*>\n*>**\n*>  Module USAGE\n*>**************\n*>\n*>    On Entry:         Set up Linkage areas -\n*>    ********              WS-Invoice-Record = Contents of data record to be written/read\n*>                          File-Access = File-Function as needed.\n*>                                        Access-Type   as needed.\n*>                          File-Defs (File-Definitions) = Paths set up.\n*>\n*>    On Exit:          Linkage contains:\n*>    *******               Record = containing a read data record or table row for both tables.\n*>                          Fs-Reply = 0, 99 or other value where\n*>                                     0  = Operation completed successfully\n*>                                     10 = End of (Cobol) File returned to calling module only.\n*>                                     21 = Invalid key on START OR key not found\n*>                                     22 - Attempt to duplicate a key value.\n*>                                     23 = Key not found.     from read indexed\n*>                                     99 = Indicates an error see WE-Error, SQL-ERR/MSG & SQL-State for more info\n*>                          WE-Error   0    = Operation completed successfully\n*>\n*>                                     999  = Not used here - Yet.\n*>                                     998* = File-Key-No Out Of Range not 1, 2 or 3.\n*>                                     997* = Access-Type wrong (< 5 or > 8)\n*>                                     996* = File Delete key out of range (not = 1 or 2)\n*>                                     995* = During Delete SQLSTATE not '00000' investigate using MSG-Err/Msg\n*>                                            or row count not > 0\n*>                                     994* = During Rewrite,                     ^^ see above ^^\n*>                                     992* = Invalid Function requested in File-Function\n*>                                     990* = Unknown and unexpected error, again ^^ see above ^^\n*>                                     989* = Unexpected error on Read-Indexed, investigate as above.\n*>                                     911* = Rdb Error during initializing,\n*>                                            possibly can not connect to database\n*>                                             Check connect data and\n*>                                             see SQL-Err & SQL-MSG\n*>                                     910* = Table locked > 5 seconds\n*>                                     901  = File Def Record size not =< than ws record size\n*>                                            Module needs ws definition changing to correct size\n*>                                            FATAL, Stop using system, fix source code\n*>                                            and recompile before using system again.\n*>                                     8nn  = Processing on RG Table & rows.\n*>                                     890  = Unknown and unexpected error, again ^^ see above on RG processing\n*>                                     880  = Unexpected range error in Rg1 secondary key.\n*>                                            Report to programming team.\n*>                                     Other = any other rdbms errors see specific\n*>                                             (Rdbms) manual\n*>                          SQL-Err   = Error code from RDBMS is set if above 2 are non zero\n*>                          SQL-Msg   = Non space providing more info if SQL-Err non '00000'\n*>                                      * = FS-Reply = 99.\n*>                          SQL-State = In support of SQL-Err for dup keys etc but could be used for other errors.\n*>\n*>       During testing a log file will be created containing datetime stamp, task and return codes\n*>       for FS-Reply, WE-Error & SQL-State with table used - in this case the Payments File.\n*>       WARNING - This file could get large so needs manually deleting after examination.\n*>\n*>       NOTE that the value in SQL-State is the standard ANSI RDBMS error code to help keep\n*>         DAL handler changes to a minimum when reusing code for other RDBs - hopefully\n*>\n*>********************************************************************************************\n*>\n*> Copyright Notice.\n*> ****************\n*>\n*> This notice supersedes all prior copyright notices & was updated 2024-04-16.\n*>\n*> These files and programs are part of the Applewood Computers Accounting\n*> System and is Copyright (c) Vincent B Coen. 1976-2025 and later.\n*>\n*> This program is now free software; you can redistribute it and/or modify it\n*> under the terms listed here and of the GNU General Public License as\n*> published by the Free Software Foundation; version 3 and later as revised\n*> for PERSONAL USAGE ONLY and that includes for use within a business but\n*> EXCLUDES repackaging or for Resale, Rental or Hire in ANY way.\n*>\n*> Persons interested in repackaging, redevelopment for the purpose of resale or\n*> distribution in a rental or hire mode must get in touch with the copyright\n*> holder with your commercial plans and proposals.\n*>\n*> ACAS is distributed in the hope that it will be useful, but WITHOUT\n*> ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n*> FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n*> for more details. If it breaks, you own both pieces but I will endeavour\n*> to fix it, providing you tell me about the problem.\n*>\n*> You should have received a copy of the GNU General Public License along\n*> with ACAS; see the file COPYING.  If not, write to the Free Software\n*> Foundation, 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.\n*>\n*>**********************************************************************************\n*>\n environment division.\n copy \"envdiv.cob\".\n*>\n input-output section.\n Data Division.\n Working-Storage Section.\n 77  prog-name           pic x(19)    value \"invoiceMT (3.02.14)\".\n*>\n*> JC WS requirements here\n*>\n 77  ws-Where           pic x(512).\n 77  ws-Where-2         pic x(512).    *> RG1\n*>\n*>  Used within presql generated code\n*>\n 01  WS-Reply           pic x           value space.\n 01  WS-MYSQL-I         PIC S9(4) COMP.\n 01  WS-MYSQL-EDIT      PIC -Z(18)9.9(9).\n*>\n *> TESING data\n  *>\n*>\n 01  WS-Temp-ED-Row         pic 9(7).  *> for row cnt. 10M-1 Inv. records\n*>\n*>  This will hold the last key read so we can know if the next request\n*>    is for a body row or not.\n*>      we will need to also hold the value from WS-Sih-Lines in\n*>       the invoice table - stored in WS-Actual-Lines-In-Row.\n*>\n*>     Not used for writing but could be for deletes.\n*>\n 01  WS-Last-Read-Key.\n     03  WS-Last-Read-Invoice pic 9(8)    value zero.\n     03  WS-Last-Read-Line    pic 99      value 40.\n 01  WS-Actual-Lines-In-Row   pic 99      value zero.\n*>\n*> The communication area for the MySQL database changed for free/mysql\n*>\n*>  jc preSQL MySQL stuff ends\n*>\n*> Metadata on primary keys...   for SAINVOICE-REC & SAINV-LINES-REC\n*>\n 01  Table-Of-KeyNames.\n     03  filler         pic x(30) value 'SINVOICE-KEY                  '.   *> In SAINVOICE-REC\n     03  filler         pic x(8)  value '00010010'.  *> offset/length\n     03  filler         pic x(3)  value 'STR'.       *> data type\n *>\n     03  filler         pic x(30) value 'IL-LINE-KEY'.                      *> In SAINV-LINES-REC\n     03  filler         pic x(8)  value '00010010'.  *> offset/length\n     03  filler         pic x(3)  value 'STR'.       *> data type\n 01  filler redefines Table-Of-KeyNames.\n     03  KeyOfReference occurs 2\n                             indexed by KOR-x1.\n         05  keyname    pic x(30).\n         05  KOR-offset pic 9(4).\n         05  KOR-length pic 9(4).\n         05  KOR-Type   pic XXX.                    *> Not used currently\n*>\n*>  Start of RG (Repeat Groups)                        NOT USED - YET.\n*> Metadata on Repeating Groups...                     but acts as a reminder\n*>\n 01  RG-Table.\n     03  filler  pic x(30) value 'SAINV-LINES-REC'. *> table name\n     03  filler  pic s9(9) comp-5 value 40.         *> Max row count\n     03  filler  pic s9(9) comp-5 value zero.       *> current row\n*>                                                     Repeats as needed = None.\n 01  filler redefines RG-Table.\n     03  RG-Entry          occurs 1\n                          indexed by RG-x1.\n         05 RG-recname    pic x(30).\n         05 RG-maxoccurs  pic s9(9) comp-5.\n         05 RG-noloaded   pic s9(9) comp-5.         *> Number loaded.\n*>\n 01  DAL-Data.\n         05  MOST-Relation     pic xxx.             *> valid are >=, <=, <, >, =\n         05  Most-Cursor-Set   pic 9    value zero.\n             88  Cursor-Not-Active      value zero.\n             88  Cursor-Active          value 1.\n         05  Most-Cursor-Set-2 pic 9    value zero. *> RG 1\n             88  Cursor-Not-Active-2    value zero.\n             88  Cursor-Active-2        value 1.\n*>\n*>  Variables common to all DALs\n*>  ****************************\n*>\n 01  subscripts usage comp-5.\n     12 J                    pic s9(4).\n     12 K                    pic s9(4).\n     12 L                    pic s9(4).\n     12 J2                   pic s9(4).\n     12 K2                   pic s9(4).\n     12 L2                   pic s9(4).\n     12 M                    pic s9(4).\n*>\n 01  WS-Body-Key             pic x(9).  *> Not used\n*>\n 01  work-fields.\n     03  ws-env-lines    pic 999              value zero.\n     03  ws-lines        binary-char unsigned value zero.\n     03  ws-22-lines     binary-char unsigned value zero.\n     03  ws-23-lines     binary-char unsigned value zero.\n     03  ws-98-lines     binary-char unsigned value zero.\n     03  ws-99-lines     binary-char unsigned value zero.\n*>\n 01  Error-Messages.\n     03  SM901          pic x(31) value \"SM901 Note error and hit return\".\n*>\n 01  WS-Invoice-Line.\n     03  WS-Sil-Key.                     *> 10 bytes\n         05  WS-Sil-Invoice pic 9(8).\n         05  WS-Sil-Line    pic 99.\n     03  WS-Sil-Product     pic x(13).   *> +1 17/5/13\n     03  WS-Sil-Pa          pic xx.\n     03  WS-Sil-Qty         binary-short.\n     03  WS-Sil-Type        pic x.    *> 28\n     03  WS-Sil-Description pic x(32).   *> +8 17/5/13 60\n     03  WS-Sil-Net         pic s9(7)v99   comp-3.\n     03  WS-Sil-Unit        pic s9(7)v99   comp-3.\n     03  WS-Sil-Discount    pic 99v99      comp.\n     03  WS-Sil-Vat         pic s9(7)v99   comp-3.\n     03  WS-Sil-Vat-Code    pic 9.\n     03  WS-Sil-Update      pic x.\n         88 WS-Sil-Analyised                       value \"Z\".\n     03  filler             pic x.          *> size 80 to here -1 26/7/23 2 match slwsinv\n*>\n*> Load up rec layouts from the database for MySQL\n*>\n*> /MYSQL VAR\\\n*>       ACASDB\n*>       TABLE=SAINVOICE-REC,HV\n*>       TABLE=SAINV-LINES-REC,HV1\n COPY \"mysql-variables.cpy\".\n*>\n*>    Definitions for the SAINVOICE-REC Table\n*>\n       01  TP-SAINVOICE-REC                      USAGE POINTER.\n       01  TD-SAINVOICE-REC.\n           05  HV-SINVOICE-KEY                   PIC X(10).\n           05  HV-IH-INVOICE                     PIC  9(10) COMP.\n           05  HV-IH-TEST                        PIC  9(03) COMP.\n           05  HV-IH-CUSTOMER                    PIC X(7).\n           05  HV-IH-DAT                         PIC  9(10) COMP.\n           05  HV-IH-ORDER                       PIC X(10).\n           05  HV-IH-TYPE                        PIC  9(03) COMP.\n           05  HV-IH-REF                         PIC X(10).\n           05  HV-IH-DESCRIPTION                 PIC X(32).\n           05  HV-IH-P-C                         PIC S9(07)V9(02) COMP.\n           05  HV-IH-NET                         PIC S9(07)V9(02) COMP.\n           05  HV-IH-EXTRA                       PIC S9(07)V9(02) COMP.\n           05  HV-IH-CARRIAGE                    PIC S9(07)V9(02) COMP.\n           05  HV-IH-VAT                         PIC S9(07)V9(02) COMP.\n           05  HV-IH-DISCOUNT                    PIC S9(07)V9(02) COMP.\n           05  HV-IH-E-VAT                       PIC S9(07)V9(02) COMP.\n           05  HV-IH-C-VAT                       PIC S9(07)V9(02) COMP.\n           05  HV-IH-STATUS                      PIC X(1).\n           05  HV-IH-STATUS-P                    PIC X(1).\n           05  HV-IH-STATUS-L                    PIC X(1).\n           05  HV-IH-STATUS-C                    PIC X(1).\n           05  HV-IH-STATUS-A                    PIC X(1).\n           05  HV-IH-STATUS-I                    PIC X(1).\n           05  HV-IH-DEDUCT-DAYS                 PIC  9(03) COMP.\n           05  HV-IH-DEDUCT-AMT                  PIC  9(03)V9(02) COMP.\n           05  HV-IH-DEDUCT-VAT                  PIC  9(03)V9(02) COMP.\n           05  HV-IH-DAYS                        PIC  9(03) COMP.\n           05  HV-IH-CR                          PIC  9(10) COMP.\n           05  HV-IH-LINES                       PIC  9(03) COMP.\n           05  HV-IH-DAY-BOOK-FLAG               PIC X(1).\n           05  HV-IH-UPDATE                      PIC X(1).\n*>\n*>    Definitions for the SAINV-LINES-REC Table\n*>\n       01  TP-SAINV-LINES-REC                    USAGE POINTER.\n       01  TD-SAINV-LINES-REC.\n           05  HV1-IL-LINE-KEY                   PIC X(10).\n           05  HV1-IL-INVOICE                    PIC  9(10) COMP.\n           05  HV1-IL-LINE                       PIC  9(03) COMP.\n           05  HV1-IL-PRODUCT                    PIC X(13).\n           05  HV1-IL-PA                         PIC X(2).\n           05  HV1-IL-QTY                        PIC  9(05) COMP.\n           05  HV1-IL-TYPE                       PIC X(1).\n           05  HV1-IL-DESCRIPTION                PIC X(32).\n           05  HV1-IL-NET                        PIC S9(07)V9(02) COMP.\n           05  HV1-IL-UNIT                       PIC S9(07)V9(02) COMP.\n           05  HV1-IL-DISCOUNT                   PIC  9(02)V9(02) COMP.\n           05  HV1-IL-VAT                        PIC S9(07)V9(02) COMP.\n           05  HV1-IL-VAT-CODE                   PIC  9(03) COMP.\n           05  HV1-IL-UPDATE                     PIC X(1).\n*> /MYSQL-END\\\n*>\n Linkage Section.\n*>**************\n*>\n*>**********************************************************************\n copy \"wsfnctn.cob\".                         *> File-Access\n*>\n*>**********************************************************************\n*>\n copy \"Test-Data-Flags.cob\".  *> set sw-testing to zero to stop logging.\n*>\n*>  Using the first record but not the 2nd as it uses occurs 40 but\n*>   to reduce Ram usage get rid of the occurs.\n*>\n copy \"slwsinv.cob\"   replacing SInvoice-Header   by WS-Invoice-Record\n                                leading ==sih-==  by ==WS-Sih-==\n                                ==occurs 40.==    by ==.==\n                                ==sil-==          by ==Un-Used-Sil-==.\n*>\n screen section.\n*>=============\n*>\n 01  Display-Message-1       foreground-color 2.\n     03          value \"WS-Where=\"               line 23 col  1.\n     03  from WS-Where (1:J)           pic x(69)         col 10.\n*>\n 01  Display-Message-2       foreground-color 2.\n     03      value \"SM004 SQL Err No.=\"           line 4 col  1.\n     03  using Ws-Mysql-Error-Number   pic x(4)          col 19.\n     03      value \" Para=\"                              col 23.\n     03  using WS-No-Paragraph         pic 9(3)          col 29.\n     03      value \" SQL Cmd=\"                           col 32.\n     03  using Ws-Mysql-Command        pic x(199)        col 41.\n     03      value \"SQL Err Msg=\"                 line 7 col  1.\n     03  using Ws-Mysql-Error-Message  pic x(67)         col 13.\n*>\n*>\n PROCEDURE DIVISION   using File-Access\n                            ACAS-DAL-Common-data\n                            WS-Invoice-Record.   *>  Ws record\n*>**********************************************\n ba-ACAS-DAL-Process  section.\n     accept   ws-env-lines from lines.\n     if       ws-env-lines < 24\n              move  24 to ws-env-lines ws-lines\n     else\n              move  ws-env-lines to ws-lines\n     end-if\n*> Force Esc, PgUp, PgDown, PrtSC to be detected\n     set      ENVIRONMENT \"COB_SCREEN_EXCEPTIONS\" to \"Y\".\n     set      ENVIRONMENT \"COB_SCREEN_ESC\" to \"Y\".\n*>\n     add      2 to ws-lines giving ws-99-lines.\n     add      1 to ws-lines giving ws-98-lines.\n*>\n ba010-Initialise.\n*>\n     move     zero   to SQL-State.\n*>\n*>                        We-Error\n*>                        Fs-Reply.\n*>\n     move     spaces to WS-MYSQL-Error-Message\n                        WS-MYSQL-Error-Number\n                        WS-Log-Where\n                        WS-File-Key\n                        SQL-Msg\n                        SQL-Err.\n*>\n*>  Work out what is being requested and convert to action !!\n*>\n*>    This version uses the JC pre-Sql processor.\n*>    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n*>\n     evaluate File-Function\n        when  1\n              go to ba020-Process-Open          *> Coded / D.tested\n        when  2\n              go to ba030-Process-Close         *> Coded / D.tested\n        when  3\n        when  34                                *> Read-Next-Header - Special\n              go to ba040-Process-Read-Next     *>         cursor active\n        when  4\n              go to ba050-Process-Read-Indexed\n        when  5\n              go to ba070-Process-Write         *> Coded / D.tested\n*>\n*> option 6 is a special to cleardown all LINE data for 1 invoice\n*>\n        when  6\n              go to ba085-Process-Delete-All    *> Coded / D.Tested --- DELETE-ALL  Special\n        when  7\n              go to ba090-Process-Rewrite\n        when  8\n              go to ba080-Process-Delete\n        when  9\n              go to ba060-Process-Start         *> Coded / D.tested\n        when  other\n              go to ba100-Bad-Function\n     end-evaluate.\n*>\n*> Paragraphs used for RDB and log file\n*>\n*>  ba020-Process-Open         - P = 1\n*>  ba030-Process-Close        - P = 2\n*>  ba040-Process-Read-Next    - P = 3\n*>  ba041-Reread               - P = 4\n*>  ba050-Process-Read-Indexed - P = 5  SELECT\n*>  ba050-Process-Read-Indexed - P = 6  FETCH\n*>  ba060-Process-Start        - P = 8  SELECT  Invoice HEAD\n*>  ba060-Process-Start        - P = 57 SELECT  Invoice LINE\n*>  ba070-Process-Write        - P = 10 bb200-insert    HEAD\n*>  ba080-Process-Delete       - P = 13 DELETE          HEAD\n*>  ba085-Process-Delete-All   - P = 15 DELETE          HEAD\n*>  ba090-Process-Rewrite      - P = 17 UPDATE          HEAD\n*>  ba998-Free                 - P = 20 FREE\n*>  bc050-Process-Read-Indexed - P = 51 SELECT          LINES\n*>                                   52 FETCH           --\n*>  bc070-Process-Write        - P = 53 INSERT          --\n*>                                   56 UPDATE          --\n*>  bc080-Process-Delete       - P = 54 DELETE          --\n*>  bc085-Process-Delete-All   - P = 55 DELETE          --\n*>  bc090-Process-Rewrite      - P = 56 UPDATE          --\n*>\n ba020-Process-Open.             *> dry tested - no rg01 requirements.\n *>\n *>  Manual process MYSQL INIT\n *>",
        "line": 63
      },
      {
        "type": "IF",
        "condition": "fs-reply not = zero\n              go   to ba999-end.\n*>\n*> *> /MYSQL INIT\\\n*>       BASE=ACASDB\n*>       IMPLEMENTATION=dev-prog-001\n*>       PASSWORD=mysqlpass\n*> *> /MYSQL-END\\\n*>\n     move    \"OPEN SL INVOICE\" to WS-File-Key\n     set     Cursor-Not-Active to true\n     go      to ba999-end.\n*>\n ba030-Process-Close.             *> dry tested - no rg01 requirements.\n     if      Cursor-Active\n             perform ba998-Free.\n*>\n     move     2 to ws-No-Paragraph.\n     move    \"CLOSE SL INVOICE\" to WS-File-Key.\n*>  /MYSQL CLOSE\\\n*>\n*>    Close the Database\n*>\n           PERFORM MYSQL-1980-CLOSE THRU MYSQL-1999-EXIT\n*>  /MYSQL-END\\\n     go      to ba999-end.\n*>\n ba040-Process-Read-Next.             *> dry test.. - Has rg01 requirements.\n*>\n*>  Here we have for a given key first read and transfer a inv header\n*>",
        "line": 596
      },
      {
        "type": "IF",
        "condition": "no cursor active using lowest\n*>    possible key of \"0000000000\"\n*>           [ SINVOICE-KEY ]\n*>\n     if       Cursor-Not-Active\n              set      KOR-x1 to 1                *> 1 = Primary\n              move     KOR-offset (KOR-x1) to K\n              move     KOR-length (KOR-x1) to L\n*>\n              move     spaces to WS-Where\n              move     1   to J\n              string   \"`\"                   delimited by size\n                       KeyName (KOR-x1)      delimited by space\n                       \"`\"                   delimited by size\n                       \" >= \"                delimited by size\n                       '\"0000000000\"'        delimited by size  *> for 1st time active only\n                       ' ORDER BY '          delimited by size\n                       \"`\"                   delimited by size\n                       keyname (KOR-x1)      delimited by space\n                       \"`\"                   delimited by size\n                         ' ASC'              delimited by size\n                                      into ws-Where\n                                      with pointer J\n              end-string\n*>\n              move     ws-Where (1:J)   to WS-Log-Where       *>  For test logging\n              move     3 to ws-No-Paragraph\n*>               /MYSQL SELECT\\\n*>\n*>    Select rows\n*>\n*>                    TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"SELECT * FROM \"\n             \"`SAINVOICE-REC`\"\n             \" WHERE \"\n             ws-Where (1:J)\n            \";\"  X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n           PERFORM MYSQL-1220-STORE-RESULT THRU MYSQL-1239-EXIT\n           MOVE WS-MYSQL-RESULT TO TP-SAINVOICE-REC\n*>               /MYSQL-END\\\n           move    \"0000000000\" to WS-File-Key\n              if    Testing-2\n                    display Display-Message-1 with erase eos\n              end-if\n*>\n*>  It could be an empty table so test for it\n*>\n              if       WS-MYSQL-Count-Rows = zero\n                       call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n                       call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n                       move  WS-MYSQL-SqlState   to SQL-State\n                       if    WS-MYSQL-Error-Number  not = \"0  \"    *> set non '0' if no rows ?\n                             move WS-MYSQL-Error-Number to SQL-Err\n                             call \"MySQL_error\" using WS-MYSQL-Error-Message\n                             move WS-MYSQL-Error-Message to SQL-Msg\n                       end-if       *> do not really need to do this meaning the above CALL\n                       move 10 to fs-reply\n                       move 10 to WE-Error        *> should be 0 'JIC' likewise the others\n                       move    \"No Data\" to WS-File-Key\n                       go to ba999-End       *> can clear the dup code after testing\n              end-if                         *> We have data\n              set      Cursor-Active to true\n              move     WS-MYSQL-Count-Rows to WS-Temp-ED-Row\n              move    spaces to WS-File-Key\n              string   \"> 0 got cnt=\" delimited by size\n                       WS-Temp-ED-Row delimited by size\n                       \" recs for INVOICE-REC Table\"\n                        into WS-File-Key\n              end-string\n              perform ba999-End                         *> log it\n     end-if.\n*>\n ba041-Reread.\n*>\n*>  If here cursor is set (even from start), so get the next row\n*>\n     move     spaces to WS-Log-Where.\n     move     4 to ws-No-Paragraph.\n     move     zero to return-code.\n*>\n*>  First check if a prev read has occured\n*>\n     if       WS-Last-Read-Invoice = zero      *> DALS Not yet called\n              go to ba042-Fetch.               *>  so get header rec.\n*>\n*> Check for status of body-line counts etc & get the next row in sequence within invoice.\n*>  but 1st support for Read-Next-Header to bypass line processing.\n*>\n     if       FN-Read-Next-Header\n              go to ba042-Fetch.\n*>\n     if       WS-Last-Read-Line < WS-Actual-Lines-In-Row\n              add 1 WS-Last-Read-Line giving   WS-Sih-Test\n              move  WS-Last-Read-Invoice    to WS-Sih-Invoice\n              perform bc050-Process-Read-Indexed thru bc059-Exit\n              if     fs-Reply not = zero    *> = 23    *> no row found\n                     initialise WS-Invoice-Record\n                     move spaces to WS-File-Key\n                     string WS-Invoice-Key\n                            \" Not Found\"\n                                 into WS-File-Key\n                     end-string\n                     go to ba999-End        *> This should NOT happen\n              else     *> got a row\n                     move WS-Sih-Test to WS-Last-Read-Line\n                     go to ba999-End\n              end-if\n     end-if.\n*>\n*> Not, so get next invoice Header rec\n*>\n ba042-Fetch.\n*>      /MYSQL FETCH\\\n*>\n*>    Fetch next record\n*>\n*>             TABLE=SAINVOICE-REC\n           MOVE TP-SAINVOICE-REC TO WS-MYSQL-RESULT\n           CALL \"MySQL_fetch_record\" USING WS-MYSQL-RESULT\n                    HV-SINVOICE-KEY\n                    HV-IH-INVOICE\n                    HV-IH-TEST\n                    HV-IH-CUSTOMER\n                    HV-IH-DAT\n                    HV-IH-ORDER\n                    HV-IH-TYPE\n                    HV-IH-REF\n                    HV-IH-DESCRIPTION\n                    HV-IH-P-C\n                    HV-IH-NET\n                    HV-IH-EXTRA\n                    HV-IH-CARRIAGE\n                    HV-IH-VAT\n                    HV-IH-DISCOUNT\n                    HV-IH-E-VAT\n                    HV-IH-C-VAT\n                    HV-IH-STATUS\n                    HV-IH-STATUS-P\n                    HV-IH-STATUS-L\n                    HV-IH-STATUS-C\n                    HV-IH-STATUS-A\n                    HV-IH-STATUS-I\n                    HV-IH-DEDUCT-DAYS\n                    HV-IH-DEDUCT-AMT\n                    HV-IH-DEDUCT-VAT\n                    HV-IH-DAYS\n                    HV-IH-CR\n                    HV-IH-LINES\n                    HV-IH-DAY-BOOK-FLAG\n                    HV-IH-UPDATE\n\n*>      /MYSQL-END\\\n     end-call\n*>\n     if       return-code = -1     *> no more data so free cursor & return\n              move 10 to fs-Reply\n                         WE-Error      *> should be 0 likewise the others\n              move    \"EOF\" to WS-File-Key\n              set Cursor-Not-Active to true\n              go to ba999-End\n     end-if\n*>\n     if       WS-MYSQL-Count-Rows = zero   *> no data but should not happen here\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using WS-MYSQL-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err   *> Not really needed but help for testing\n                    move WS-MYSQL-Error-Message to SQL-Msg   *>  ditto\n                    initialize WS-Invoice-Record with filler\n                   move    \"EOF2\" to WS-File-Key\n              end-if\n              move 10 to fs-reply                  *> EOF equivilent !!\n              move 10 to WE-Error\n              set Cursor-Not-Active to true\n              go to ba999-End\n     end-if.\n*>\n     if       fs-reply = 10                 *> should not happen as tested prior\n              set Cursor-Not-Active to true\n              move    \"EOF3\" to WS-File-Key\n              go to ba999-End\n     end-if.\n*>\n     perform  bb100-UnloadHVs.       *> transfer/move HV vars to Record layout\n     move     WS-Invoice-Key to WS-File-Key.\n     move     zero to fs-reply WE-Error.\n     go       to ba999-End.      *> exit.\n*>\n ba050-Process-Read-Indexed.             *> dry test.. - Has rg01 requirements.\n*>\n*>  Test what the key end is (Line or test) & if not zero\n*>   we do RG1 insead of primary table\n*>\n     if       WS-Sih-test not = zero     *> if true  process line RG\n              perform  bc050-Process-Read-Indexed  thru bc059-Exit\n              go       to ba999-exit.\n*>\n*>  Now do on correct key within WHERE\n*>  Sets up key and compare data\n*>\n     set      KOR-x1 to 1.      *> 1 = Primary\n     move     KOR-offset (KOR-x1) to K\n     move     KOR-length (KOR-x1) to L\n*>\n     move     spaces to WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Where (1:J)   to WS-Log-Where.    *>  For test logging\n     if    Testing-2\n           display Display-Message-1 with erase eos\n     end-if\n     move     5 to ws-No-Paragraph\n*>      /MYSQL SELECT\\\n*>\n*>    Select rows\n*>\n*>             TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"SELECT * FROM \"\n             \"`SAINVOICE-REC`\"\n             \" WHERE \"\n             WS-Where (1:J)\n            \";\"  X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n           PERFORM MYSQL-1220-STORE-RESULT THRU MYSQL-1239-EXIT\n           MOVE WS-MYSQL-RESULT TO TP-SAINVOICE-REC\n*>      /MYSQL-END\\\n*>\n     if     WS-MYSQL-Count-Rows = zero\n            move 23  to fs-Reply             *> could also be 21 or 14\n            move zero to WE-Error\n            go to ba998-Free\n     end-if\n     move     6 to ws-No-Paragraph\n*>      /MYSQL FETCH\\\n*>\n*>    Fetch next record\n*>\n*>             TABLE=SAINVOICE-REC\n           MOVE TP-SAINVOICE-REC TO WS-MYSQL-RESULT\n           CALL \"MySQL_fetch_record\" USING WS-MYSQL-RESULT\n                    HV-SINVOICE-KEY\n                    HV-IH-INVOICE\n                    HV-IH-TEST\n                    HV-IH-CUSTOMER\n                    HV-IH-DAT\n                    HV-IH-ORDER\n                    HV-IH-TYPE\n                    HV-IH-REF\n                    HV-IH-DESCRIPTION\n                    HV-IH-P-C\n                    HV-IH-NET\n                    HV-IH-EXTRA\n                    HV-IH-CARRIAGE\n                    HV-IH-VAT\n                    HV-IH-DISCOUNT\n                    HV-IH-E-VAT\n                    HV-IH-C-VAT\n                    HV-IH-STATUS\n                    HV-IH-STATUS-P\n                    HV-IH-STATUS-L\n                    HV-IH-STATUS-C\n                    HV-IH-STATUS-A\n                    HV-IH-STATUS-I\n                    HV-IH-DEDUCT-DAYS\n                    HV-IH-DEDUCT-AMT\n                    HV-IH-DEDUCT-VAT\n                    HV-IH-DAYS\n                    HV-IH-CR\n                    HV-IH-LINES\n                    HV-IH-DAY-BOOK-FLAG\n                    HV-IH-UPDATE\n\n*>      /MYSQL-END\\\n     end-call\n*>\n     if       WS-MYSQL-Count-Rows not > zero\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    move 990 to WE-Error\n                    call \"MySQL_error\" using WS-MYSQL-Error-Message\n                    move WS-MYSQL-Error-Number to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              else\n                    move 989  to WE-Error\n                    move zero to SQL-Err\n                    move spaces to SQL-Msg\n              end-if\n              move 23   to fs-reply\n              move spaces to WS-File-Key\n              go to ba998-Free\n     end-if                        *> row count zero should show up as a MYSQL error ?\n     perform bb100-UnloadHVs       *> transfer/move HV vars to ws-Record layout\n     move     HV-SINVOICE-KEY to WS-File-Key.\n     perform ba999-End.\n*>\n     move     zero to FS-Reply WE-Error.\n     perform  ba998-Free.                       *> Free cursor\n     go       to ba999-Exit.\n*>\n ba060-Process-Start.            *>  coded for header & lines [ NEEDED ? check all calling code ].\n*>                                   Need to see if bcnn-Read-Next is needed\n*>                                   if not than rg1 processing can be removed.\n*>\n*>  Check for Param error 1st on start\n*>\n     if       access-type < 5 or > 8                   *> not using not < or not >\n              move 99 to FS-Reply\n              move 997 to WE-Error                     *> Invalid calling parameter settings     997\n              go to ba999-end\n     end-if\n*>\n*>  First clear any active cursors\n*>\n     if       Cursor-Active\n              perform ba998-Free.\n*>\n*>   Header Records First.\n*>\n*>  Now do Start on correct key before read-next  within WHERE\n*>  Set up MOST-relation for condition test and key on Header table.\n*>\n     set      KOR-x1 to 1.\n     move     KOR-offset (KOR-x1) to K\n     move     KOR-length (KOR-x1) to L\n*>\n     move     spaces to MOST-Relation.\n     move     1   to J.\n     evaluate Access-Type\n              when  5                           *> fn-equal-to\n                    move \"=  \" to MOST-Relation\n              when  6                           *> fn-less-than\n                    move \"<  \" to MOST-Relation\n              when  7                           *> fn-greater-than\n                    move \">  \" to MOST-Relation\n              when  8                           *> fn-not-less-than\n                    move \">= \" to MOST-Relation\n              when  9                           *> fn-not-greater-than [ not currently used in ACAS ]\n                    move \"<= \" to MOST-Relation\n     end-evaluate\n*>\n     move     spaces to WS-Where\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              MOST-relation         delimited by space\n              '\"'                   delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n              ' ORDER BY '          delimited by size\n              \"`\"                   delimited by size\n              keyname (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n                ' ASC  '            delimited by size\n                             into WS-Where\n                             with pointer J\n     end-string\n     move     WS-Where (1:J)  to WS-Log-Where.    *>  For test logging\n     move     WS-Invoice-Record (K:L) to WS-File-Key\n     if    Testing-2\n           display Display-Message-1 with erase eos\n     end-if\n*>\n     move     8 to ws-No-Paragraph\n*>      /MYSQL SELECT\\\n*>\n*>    Select rows\n*>\n*>             TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"SELECT * FROM \"\n             \"`SAINVOICE-REC`\"\n             \" WHERE \"\n             WS-Where (1:J)\n            \";\"  X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n           PERFORM MYSQL-1220-STORE-RESULT THRU MYSQL-1239-EXIT\n           MOVE WS-MYSQL-RESULT TO TP-SAINVOICE-REC\n*>      /MYSQL-END\\\n*>\n     if       WS-MYSQL-Count-Rows not zero\n              set Cursor-Active to true\n     end-if\n*>\n     if       WS-MYSQL-Count-Rows = zero\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using WS-MYSQL-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 21 to fs-reply                  *> this may need changing for val in WE-Error!!\n              move zero to WE-Error\n     else\n              move  zero to FS-Reply WE-Error\n              move     WS-MYSQL-Count-Rows to WS-Temp-ED-Row\n              string   MOST-relation\n                       WS-Invoice-Record (K:L)\n                       \" got \" delimited by size\n                       WS-Temp-ED-Row delimited by size\n                       \" recs\"\n                        into WS-File-Key\n              end-string\n     end-if\n     perform  ba999-End.    *> Logging only\n*>\n*>  Extra code for RG1 table -- Line Body Items - ASSUMING here so ?\n*>\n     set      KOR-x1 to 2.\n     move     KOR-offset (KOR-x1) to K2.\n     move     KOR-length (KOR-x1) to L2.\n     move     1   to J2.\n     move     spaces to WS-Where-2.\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              MOST-relation         delimited by space\n              WS-Invoice-Record (K2:L2)       delimited by size\n              ' ORDER BY '          delimited by size\n              \"`\"                   delimited by size\n              keyname (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n                ' ASC  '            delimited by size\n                             into WS-Where-2\n                             with pointer J2\n     end-string\n*>\n*>    Save the pointers (SAINVOICE-REC) [ and we will restore at end ]\n*>\n     move     WS-Mysql-Result     to WS-Mysql-Save-Result.     *> primary Tbl\n     move     WS-Mysql-Count-Rows to WS-Mysql-Save-Count-Rows.\n     move     zero to WS-Mysql-Count-Rows.\n*>\n     move     57 to ws-No-Paragraph\n*>      /MYSQL SELECT\\\n*>\n*>    Select rows\n*>\n*>             TABLE=SAINV-LINES-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"SELECT * FROM \"\n             \"`SAINV-LINES-REC`\"\n             \" WHERE \"\n             WS-Where-2 (1:J2)\n            \";\"  X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n           PERFORM MYSQL-1220-STORE-RESULT THRU MYSQL-1239-EXIT\n           MOVE WS-MYSQL-RESULT TO TP-SAINV-LINES-REC\n*>      /MYSQL-END\\\n*>\n     if       WS-MYSQL-Count-Rows not zero\n              set Cursor-Active-2 to true\n     else\n              set Cursor-Not-Active-2 to true\n     end-if\n*>\n*> Should not be zero for invoice Line table if still unposted and cleared.\n*>\n     if       WS-MYSQL-Count-Rows = zero\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using WS-MYSQL-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 21 to fs-reply                  *> this may need changing for val in WE-Error!!\n              move zero to WE-Error\n     else\n              move  zero to FS-Reply WE-Error\n              move     WS-MYSQL-Count-Rows to WS-Temp-ED-Row\n              string   MOST-relation\n                       WS-Invoice-Record (K2:L2)\n                       \" got \" delimited by size\n                       WS-Temp-ED-Row delimited by size\n                       \" recs RG1 (Lines)\"\n                        into WS-File-Key\n              end-string\n     end-if\n*>\n*>  Save pointer and count for RG1 also Cursor2 active (or not )\n*>\n*>  ALL this does depend on application code  in slnnn ???? <<<<<<<\n*>\n     move     WS-Mysql-Result to WS-Mysql-Save-Result-RG1.    *> RG 1 Tb2\n     move     WS-Mysql-Count-Rows to WS-Mysql-Save-Count-Rows-RG1.\n*>\n*> Restore the Primary table pointer & row count.\n*>\n     move     WS-Mysql-Save-Result to WS-Mysql-Result.     *> primary Tbl\n     move     WS-Mysql-Save-Count-Rows to WS-Mysql-Count-Rows.\n*>\n     go       to ba999-end.\n*>\n*>  Now a read next will process a Fetch from cursor ( or cursor-2 )\n*>\n ba070-Process-Write.             *> dry test... - Has rg01 requirements.\n*>\n*>  Are we being requested writing a body line (rg01) ? lets check\n*>    but rec still in WS-Invoice-Record\n*>\n     if       WS-Sih-Test not = zero               *> It is a line row\n              perform  bc070-Process-Write thru bc070-Exit\n              go to ba999-Exit.                    *> logging rec done.\n*>\n*>  Nope its a Invoice Header\n*>\n     perform  bb000-HV-Load.                       *>  move WS-Invoice-Record fields to HV fields\n     move     WS-Invoice-Key to WS-File-Key.\n     move     zero to FS-Reply\n                      WE-Error\n                      SQL-State.\n     move     spaces to SQL-Msg\n     move     zero to SQL-Err\n     move     10 to ws-No-Paragraph.\n     perform  bb200-Insert.\n     if       WS-MYSQL-COUNT-ROWS not = 1\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              move  99 to fs-reply                  *> this may need changing for val in WE-Error!!\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n                    if    Sql-State = \"23000\"      *> Dup key\n                       or SQL-Err (1:4) = \"1062\"   *> Ditto, ditto\n                                     or = \"1022\"\n                          move 22 to fs-reply\n                    end-if\n              end-if\n     end-if\n     perform  ba999-End.\n*>\n     go       to ba999-Exit.\n*>\n ba080-Process-Delete.             *> dry tested. - Has rg01 requirements.\n*>\n*>\n*>  Are we being requested deleting a body line ? lets check\n*>\n*> [ Deleting all for a key should go to Delete-ALL   ???? ]\n*>\n     if       WS-Sih-Test not = zero\n              perform  bc080-Process-Delete thru bc080-Exit\n              go to ba999-Exit.\n*>\n*>  Nope its a Invoice Header\n*>\n     set      KOR-x1 to 1.\n     move     KOR-offset (KOR-x1) to K\n     move     KOR-length (KOR-x1) to L\n*>\n     move     spaces to WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Invoice-Record (K:L)  to WS-File-Key.\n     move     WS-Where (1:J)   to WS-Log-Where.    *>  For test logging\n     if    Testing-2\n           display Display-Message-1 with erase eos\n     end-if\n     move     13 to ws-No-Paragraph.\n*>      /MYSQL DELETE\\\n*>\n*>    Delete a row\n*>\n*>             TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"DELETE FROM \"\n             \"`SAINVOICE-REC`\"\n             \" WHERE \"\n             WS-Where (1:J)\n             X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>      /MYSQL-END\\\n     if       WS-MYSQL-COUNT-ROWS not = 1\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 99 to fs-reply\n              move 995 to WE-Error\n              go to ba999-End\n     else\n              move spaces to SQL-Msg\n              move zero   to SQL-Err\n     end-if.\n     perform  ba999-End.\n*>\n     move     zero to FS-Reply WE-Error.\n     go       to ba999-Exit.\n*>\n ba085-Process-Delete-ALL.    *> Delete all recs for a given invoice key\n*>                                 / lines\n*>\n*> This is the equivalent of :\n*>           EXEC SQL\n*>              DELETE\n*>              FROM SAINVOICE-REC WHERE IH-INVOICE = {key value (1:8)}\n*>           END-EXEC.\n*>\n*>  This will delete all lines for given invoice.\n*>\n*>           EXEC SQL\n*>              DELETE\n*>              FROM SAINV-LINES-REC WHERE IL-INVOICE = {key value (1:8)}\n*>           END-EXEC.\n*>\n*>  That creates the following code from dbpre\n*>\n*>   MOVE LOW-VALUES TO SQLCA-STATEMENT.\n*>   STRING\n*>     \"DELETE \" DELIMITED BY SIZE\n*>     \"FROM \" DELIMITED BY SIZE\n*>     \"SAINVOICE-REC \" DELIMITED BY SIZE\n*>     \"WHERE `IH-INVOICE`=\"\n*>         key value (1:8)\n*>            INTO SQLCA-STATEMENT.\n*>   CALL \"MySQL_query\" USING SQLCA-STATEMENT.\n*>   MOVE LOW-VALUES TO SQLCA-STATEMENT.\n*>   STRING\n*>     \"DELETE \" DELIMITED BY SIZE\n*>     \"FROM \" DELIMITED BY SIZE\n*>     \"SAINV-LINES-REC \" DELIMITED BY SIZE\n*>     \"WHERE `IL-INVOICE`=\"\n*>         key value (1:8)\n*>            INTO SQLCA-STATEMENT.\n*>   CALL \"MySQL_query\" USING SQLCA-STATEMENT.\n*>\n*>",
        "line": 631
      },
      {
        "type": "IF",
        "condition": "this does not work it will be changed.\n*>\n     set      KOR-x1 to 1\n     move     KOR-offset (KOR-x1) to K\n     move     KOR-length (KOR-x1) to L\n*>\n     move     spaces to WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size          *> was '<\"'\n              WS-Invoice-Record (K:L)    delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     spaces to WS-File-Key\n     move     WS-Invoice-Key to WS-File-Key\n     move     WS-Where (1:J)   to WS-Log-Where.   *>  For test logging\n     if    Testing-2\n           display Display-Message-1 with erase eos\n     end-if\n     move     15 to ws-No-Paragraph.\n*>      /MYSQL DELETE\\\n*>\n*>    Delete a row\n*>\n*>             TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"DELETE FROM \"\n             \"`SAINVOICE-REC`\"\n             \" WHERE \"\n             WS-Where (1:J)\n             X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>      /MYSQL-END\\\n     if       WS-MYSQL-COUNT-ROWS not > zero    *> Changed for delete-ALL\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 99  to fs-reply\n              move 995 to WE-Error\n              go to ba999-End\n     else      *> of course there could be no data in table\n              move spaces to SQL-Msg\n              move zero   to SQL-Err\n     end-if.\n     move     zero to FS-Reply\n                      WE-Error.\n     perform  ba999-End.\n*>\n*> Process RG data  where key is inv # for all lines within inv#\n*>\n     perform  bc085-Process-Delete-ALL thru bc085-Exit.\n     go       to ba999-Exit.\n*>\n ba090-Process-Rewrite.             *> dry tested - Has rg01 requirements.\n*>\n*>  Are we being requested rewriting a body line ? lets check but\n*>    rec still in WS-Invoice-Record\n*>\n     if       WS-Sih-Test not = zero\n              perform  bc090-Process-ReWrite thru bc090-Exit\n              go to ba999-Exit.                    *> logging rec done.\n*>\n*>  Nope its a Invoice Header\n*>\n     perform  bb000-HV-Load.       *> Load up the HV fields from table record in WS\n     move     WS-Invoice-Key to WS-File-Key.\n     move     17 to ws-No-Paragraph.\n     set      KOR-x1 to 1            *> 1 = Primary\n     move     KOR-offset (KOR-x1) to K\n     move     KOR-length (KOR-x1) to L\n*>\n     move     spaces to WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Where (1:J)   to WS-Log-Where.    *>  For test logging\n     perform  bb300-Update.\n*>\n     if       Testing-2\n              display Display-Message-1 with erase eos\n     end-if\n*>\n     if       WS-MYSQL-COUNT-ROWS not = 1\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 99 to fs-reply                  *> this may need changing for val in WE-Error!!\n              move 994 to WE-Error\n              go to ba999-End\n     end-if\n     move     zero   to FS-Reply\n                        WE-Error\n                        SQL-Err.\n     move     spaces to SQL-Msg.\n     perform  ba999-End.\n*>\n     go       to ba999-Exit.\n*>\n ba100-Bad-Function.\n*>\n*> Houston; We have a problem\n*>\n     move     990 to WE-Error.\n     move     99 to Fs-Reply.\n     go       to ba999-end.\n*>\n*> /MYSQL PRO\\\n COPY \"mysql-procedures.cpy\".\n*> /MYSQL-END\\\n*>\n ba998-Free.\n     move     20 to ws-No-Paragraph.\n*>      /MYSQL FREE\\\n*>\n*>    Free result array\n*>\n*>             TABLE=SAINVOICE-REC\n           MOVE TP-SAINVOICE-REC TO WS-MYSQL-RESULT\n           CALL \"MySQL_free_result\" USING WS-MYSQL-RESULT end-call\n*>      /MYSQL-END\\\n     set      Cursor-Not-Active to true.\n*>\n ba999-end.\n*>  Any Clean ups before quiting    move data record ?????  do so at the start as well ??????\n*>\n     if       Testing-1\n              perform Ca-Process-Logs\n     end-if.\n*>\n ba999-exit.\n     exit program.\n*>\n bb000-HV-Load      Section.\n*>*************************\n*>\n*>  Load the Host variables with data from the passed record\n*>\n*> This Method loads the Host Variables for the Base table with\n*> the data passed in the data-buffer.\n*>\n     initialize TD-SAINVOICE-REC.\n*>\n     move     WS-Invoice-Key       to HV-SINVOICE-KEY.\n*>\n     move     WS-Sih-Invoice       to HV-IH-INVOICE.\n     move     WS-Sih-Test          to HV-IH-TEST.\n     move     WS-Sih-Customer      to HV-IH-CUSTOMER\n     move     WS-Sih-Date          to HV-IH-DAT\n     move     WS-Sih-Order         to HV-IH-ORDER\n     move     WS-Sih-Type          to HV-IH-TYPE\n     move     WS-Sih-Ref           to HV-IH-REF\n     move     WS-Sih-Description   to HV-IH-DESCRIPTION\n     move     WS-Sih-P-C           to HV-IH-P-C\n     move     WS-Sih-Net           to HV-IH-NET\n     move     WS-Sih-Extra         to HV-IH-EXTRA\n     move     WS-Sih-Carriage      to HV-IH-CARRIAGE\n     move     WS-Sih-Vat           to HV-IH-VAT\n     move     WS-Sih-Discount      to HV-IH-DISCOUNT\n     move     WS-Sih-E-Vat         to HV-IH-E-VAT\n     move     WS-Sih-C-Vat         to HV-IH-C-VAT\n     move     WS-Sih-Status        to HV-IH-STATUS\n     move     WS-Sih-Status-P      to HV-IH-STATUS-P\n     move     WS-Sih-Status-L      to HV-IH-STATUS-L\n     move     WS-Sih-Status-C      to HV-IH-STATUS-C\n     move     WS-Sih-Status-A      to HV-IH-STATUS-A\n     move     WS-Sih-Status-I      to HV-IH-STATUS-I\n     move     WS-Sih-Lines         to HV-IH-LINES\n     move     WS-Sih-Deduct-Days   to HV-IH-DEDUCT-DAYS\n     move     WS-Sih-Deduct-Amt    to HV-IH-DEDUCT-AMT\n     move     WS-Sih-Deduct-Vat    to HV-IH-DEDUCT-VAT\n     move     WS-Sih-Days          to HV-IH-DAYS\n     move     WS-Sih-CR            to HV-IH-CR\n     move     WS-Sih-Day-Book-Flag to HV-IH-DAY-BOOK-FLAG\n     move     WS-Sih-Update        to HV-IH-UPDATE.\n*>\n bb000-Exit.\n     exit section.\n*>\n bb100-UnloadHVs    Section.\n*>*************************\n*>\n*>  Load the data buffer in the interface with data from the host variables.\n*>\n     initialize WS-Invoice-Record.\n*>\n     move     HV-IH-INVOICE    to WS-Sih-Invoice\n     move     HV-IH-TEST       to WS-Sih-Test\n     move     HV-IH-CUSTOMER      to WS-Sih-Customer\n     move     HV-IH-DAT           to WS-Sih-Date\n     move     HV-IH-ORDER         to WS-Sih-Order\n     move     HV-IH-TYPE          to WS-Sih-Type\n     move     HV-IH-REF           to WS-Sih-Ref\n     move     HV-IH-DESCRIPTION   to WS-Sih-Description\n     move     HV-IH-P-C           to WS-Sih-P-C\n     move     HV-IH-NET           to WS-Sih-Net\n     move     HV-IH-EXTRA         to WS-Sih-Extra\n     move     HV-IH-CARRIAGE      to WS-Sih-Carriage\n     move     HV-IH-VAT           to WS-Sih-Vat\n     move     HV-IH-DISCOUNT      to WS-Sih-Discount\n     move     HV-IH-E-VAT         to WS-Sih-E-Vat\n     move     HV-IH-C-VAT         to WS-Sih-C-Vat\n     move     HV-IH-STATUS        to WS-Sih-Status\n     move     HV-IH-STATUS-P      to WS-Sih-Status-P\n     move     HV-IH-STATUS-L      to WS-Sih-Status-L\n     move     HV-IH-STATUS-C      to WS-Sih-Status-C\n     move     HV-IH-STATUS-A      to WS-Sih-Status-A\n     move     HV-IH-STATUS-I      to WS-Sih-Status-I\n     move     HV-IH-LINES         to WS-Sih-Lines\n     move     HV-IH-DEDUCT-DAYS   to WS-Sih-Deduct-Days\n     move     HV-IH-DEDUCT-AMT    to WS-Sih-Deduct-Amt\n     move     HV-IH-DEDUCT-VAT    to WS-Sih-Deduct-Vat\n     move     HV-IH-DAYS          to WS-Sih-Days\n     move     HV-IH-CR            to WS-Sih-CR\n     move     HV-IH-DAY-BOOK-FLAG to WS-Sih-Day-Book-Flag\n     move     HV-IH-UPDATE        to WS-Sih-Update.\n*>\n*>  THIS BLOCK SPECIAL FOR THIS DAL AS IT ALSO processes a RG.\n*>  ---------------------------------------------------------\n*>   Here save the ih-Lines to WS so we can keep track of body-lines.\n*>\n     move     HV-IH-LINES         to WS-Actual-Lines-In-Row.\n*>\n*>   Save sih Invoice & test as last key read.\n*>\n     move     HV-IH-INVOICE       to WS-Last-Read-Invoice.\n     move     HV-IH-TEST          to WS-Last-Read-Line. *> should be zero\n*>\n bb100-Exit.\n     exit section.\n*>\n bb200-Insert Section.\n*>*******************\n*>\n*>  /MYSQL INSERT\\\n*>\n*>    Insert a row\n*>\n*>         TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           MOVE 1 TO WS-MYSQL-I\n           STRING 'INSERT INTO '\n                    '`SAINVOICE-REC` SET '\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`SINVOICE-KEY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-SINVOICE-KEY,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-INVOICE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-INVOICE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-TEST`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-TEST\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CUSTOMER`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-CUSTOMER,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-ORDER`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-ORDER,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-TYPE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-TYPE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-REF`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-REF,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DESCRIPTION`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-DESCRIPTION,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-P-C`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-P-C\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-NET`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-NET\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-EXTRA`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-EXTRA\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CARRIAGE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-CARRIAGE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DISCOUNT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DISCOUNT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-E-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-E-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-C-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-C-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-P`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-P,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-L`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-L,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-C`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-C,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-A`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-A,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-I`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-I,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DEDUCT-DAYS`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DEDUCT-DAYS\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DEDUCT-AMT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DEDUCT-AMT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DEDUCT-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DEDUCT-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAYS`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DAYS\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CR`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-CR\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-LINES`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-LINES\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAY-BOOK-FLAG`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-DAY-BOOK-FLAG,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-UPDATE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-UPDATE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING \";\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING X\"00\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n       PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>  /MYSQL-END\\\n       .     *> period here\n*>\n bb200-Exit.\n     exit section.\n*>\n bb300-Update Section.\n*>*******************\n*>\n*>  /MYSQL UPDATE\\\n*>\n*>    Update a row\n*>\n*>      TABLE=SAINVOICE-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           MOVE 1 TO WS-MYSQL-I\n           STRING 'UPDATE '\n                    '`SAINVOICE-REC` SET '\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`SINVOICE-KEY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-SINVOICE-KEY,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-INVOICE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-INVOICE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-TEST`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-TEST\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CUSTOMER`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-CUSTOMER,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-ORDER`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-ORDER,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-TYPE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-TYPE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-REF`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-REF,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DESCRIPTION`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-DESCRIPTION,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-P-C`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-P-C\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-NET`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-NET\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-EXTRA`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-EXTRA\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CARRIAGE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-CARRIAGE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DISCOUNT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DISCOUNT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-E-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-E-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-C-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-C-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-P`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-P,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-L`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-L,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-C`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-C,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-A`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-A,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-STATUS-I`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-STATUS-I,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DEDUCT-DAYS`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DEDUCT-DAYS\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DEDUCT-AMT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DEDUCT-AMT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DEDUCT-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DEDUCT-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAYS`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-DAYS\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-CR`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-CR\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-LINES`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV-IH-LINES\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-DAY-BOOK-FLAG`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-DAY-BOOK-FLAG,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IH-UPDATE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV-IH-UPDATE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING \" WHERE \"\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (WS-Where (1:J))\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n           STRING \";\" X\"00\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>  /MYSQL-END\\\n       .     *> period here\n*>\n bb300-Exit.\n     exit section.\n*>\n bc000-RG-Process section.\n*>***********************\n*>\n*> This section contains mirror processes in ba000 section that act\n*> in support of paragraph based process to only deal with the\n*> RG ( Repeat Group ) segments of data.\n*>\n*>  Like ba000 processes they handle one action at a time and do not\n*>  do multiple commands or row at once.  This may come later but only\n*>   on a as needed basis.\n*>\n*>  So, bc050 processes the RG table for the held key obtained in\n*>  ba040 & ba050.  Same applies to Rewrite, Write & Delete.\n*>\n*>   This form will be used to process the invoice files tables for\n*>    both Sales & Purchase Ledgers.\n*>\n*>  Note that ws-No-Paragraph start at 51 for RG processing.\n*>  Each bc para must end with a bc0n0-Exit\n*>\n*>   Last para used is 58.\n*>\n bc050-Process-Read-Indexed.    *> Dry chk complete.\n*>\n*>  This routine is called by for both Read-Next ?? and Read-Indexed.\n*>\n*>    But first save the pointers [and we will restore at end].\n*>\n     move     WS-Mysql-Result     to WS-Mysql-Save-Result.     *> primary Tbl\n     move     WS-Mysql-Count-Rows to WS-Mysql-Save-Count-Rows.\n     move     zero to WS-Mysql-Count-Rows.\n*>\n*>  Use the Key for the primary table to get the RGs that could be up to 40\n*>   one at a time on request.\n*>\n*>   WS-Last-Read-Key is the last one read so if changes we are done.\n*>\n*>  NEED TO TRANSFER RECORD TO/FROM 01 levels\n*>\n     set      KOR-x1 to 2.                    *> was 1 = Primary now invoice line 12/07/23\n     move     KOR-offset (KOR-x1) to K\n     move     KOR-length (KOR-x1) to L\n     move     spaces to WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)    delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string.\n     move     WS-Where (1:J)   to WS-Log-Where.    *>  For test logging\n     if    Testing-2\n           display Display-Message-1 with erase eos\n     end-if\n     move     51 to ws-No-Paragraph.\n*>      /MYSQL SELECT\\\n*>\n*>    Select rows\n*>\n*>             TABLE=SAINV-LINES-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"SELECT * FROM \"\n             \"`SAINV-LINES-REC`\"\n             \" WHERE \"\n             WS-Where (1:J)\n            \";\"  X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n           PERFORM MYSQL-1220-STORE-RESULT THRU MYSQL-1239-EXIT\n           MOVE WS-MYSQL-RESULT TO TP-SAINV-LINES-REC\n*>      /MYSQL-END\\\n*>\n*> Test for no data but this should not happen - Bug in code somewhere\n*>  when inserting it. So we will do a log report for analysis.\n*>\n     if       WS-MYSQL-Count-Rows = zero    *> This should not happen as have to be > 0\n              call    \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call    \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move    WS-MYSQL-SqlState   to SQL-State\n              if      WS-MYSQL-Error-Number  not = \"0  \"    *> set non '0' if no rows ?\n                      move WS-MYSQL-Error-Number to SQL-Err\n                      call \"MySQL_error\" using WS-MYSQL-Error-Message\n                      move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move    23  to fs-reply\n              move    890 to WE-Error\n              move    spaces to WS-File-Key\n              string  \"No RG1 Data for \"\n                      WS-Invoice-Record (K:L)\n                        into WS-File-Key\n              end-string\n              initialise WS-Invoice-Record       *> Clear both in case called does not spot end of\n                         WS-Invoice-Line         *> data for Invoice and to help debugging if so\n              go      to bc058-Restore-Pointers  *> do ba999-end at end\n     end-if\n*>\n     move     WS-MYSQL-Count-Rows to WS-Temp-ED-Row.\n     string   \"RG > 0 got cnt=\" delimited by size\n              WS-Temp-ED-Row delimited by size\n                 \" recs, KEY=\"\n              WS-Invoice-Record (K:L)\n                        into WS-File-Key\n     end-string.\n     perform ba999-End.                         *> log it & continue\n*>\n bc051-Fetch-RG1.\n*>\n*>  Now get the data from RG table/s.\n*>\n     move     52 to ws-No-Paragraph\n*>      /MYSQL FETCH\\\n*>\n*>    Fetch next record\n*>\n*>             TABLE=SAINV-LINES-REC\n           MOVE TP-SAINV-LINES-REC TO WS-MYSQL-RESULT\n           CALL \"MySQL_fetch_record\" USING WS-MYSQL-RESULT\n                    HV1-IL-LINE-KEY\n                    HV1-IL-INVOICE\n                    HV1-IL-LINE\n                    HV1-IL-PRODUCT\n                    HV1-IL-PA\n                    HV1-IL-QTY\n                    HV1-IL-TYPE\n                    HV1-IL-DESCRIPTION\n                    HV1-IL-NET\n                    HV1-IL-UNIT\n                    HV1-IL-DISCOUNT\n                    HV1-IL-VAT\n                    HV1-IL-VAT-CODE\n                    HV1-IL-UPDATE\n\n*>      /MYSQL-END\\\n     end-call\n*>\n     if       WS-MYSQL-Count-Rows  > zero\n*> transfer/move HV1 vars to ws-Invoice-Line",
        "line": 1291
      },
      {
        "type": "IF",
        "condition": "*>\n*> No more rows for key\n*>\n     move     WS-Invoice-Record (K:L) to WS-File-Key.\n     move     zero to FS-Reply WE-Error.\n*>\n bc058-Restore-Pointers.\n*>\n*> Restore the Primary table pointer & row count.\n*>\n     move     WS-Mysql-Save-Result to WS-Mysql-Result.     *> primary Tbl\n     move     WS-Mysql-Save-Count-Rows to WS-Mysql-Count-Rows.\n     perform  ba999-End.\n*>\n bc059-Exit.  Exit.\n*>\n bc070-Process-Write.  *> dry coded. tested - 1\n*>\n     move     WS-Invoice-Record  to  WS-Invoice-Line.\n     perform  bc000-HV-Load-rg1.\n     move     WS-Invoice-Key to WS-File-Key.   *> Same as WS-Sil-Key\n     move     zero to FS-Reply WE-Error.\n     move     spaces to SQL-Msg\n                        SQL-State.\n     move     zero to SQL-Err.\n     move     53  to ws-No-Paragraph.\n     perform  bc200-Insert-rg1.          *> chgd 26/07/23\n*>\n     if       WS-MYSQL-COUNT-ROWS not = 1\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              move  99 to fs-reply                  *> this may need changing for val in WE-Error!!\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                 or Sql-State = \"23000\"      *> Dup key (rec already present)\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n                    if   Sql-State = \"23000\"      *> Dup key (rec already present)\n                      or SQL-Err (1:4) = \"1062\"\n                      or               = \"1022\"\n                         move 22 to fs-reply\n                    else\n                         move 99 to fs-reply                  *> this may need changing for val in WE-Error!!\n                    end-if\n              end-if\n              move    spaces to WS-File-Key\n              string  \"Cant Re|WriteRG1 Data on \"\n                      WS-Invoice-Record (K:L)\n                      \" RG=\"\n                      WS-Sil-Line\n                          into WS-File-Key\n              end-string\n     end-if\n     perform ba999-End.\n*>\n bc070-Exit.  Exit.\n*>\n bc080-Process-Delete.     *> Dry tested.\n*>\n*>  Delete one invoice-line (Item). But data is in WS-Invoice-Record\n*>\n     set      KOR-x1 to 2.      *> inv.line\n     move     KOR-offset (KOR-x1) to K\n     move     KOR-length (KOR-x1) to L\n*>\n     move     spaces to WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Invoice-Record (K:L)  to WS-File-Key.\n     move     WS-Where (1:J)   to WS-Log-Where.    *>  For test logging\n     if    Testing-2\n           display Display-Message-1 with erase eos\n     end-if\n     move     54 to ws-No-Paragraph.           *> Delete all rows (9<=) for key\n*>      /MYSQL DELETE\\\n*>\n*>    Delete a row\n*>\n*>             TABLE=SAINV-LINES-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"DELETE FROM \"\n             \"`SAINV-LINES-REC`\"\n             \" WHERE \"\n             WS-Where (1:J)\n             X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>      /MYSQL-END\\\n*>\n*>  We could have from 0 to 1 so this Error report is moot.\n*>\n     if       WS-MYSQL-COUNT-ROWS not > zero\n              call \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move spaces to WS-File-Key\n              move WS-MYSQL-COUNT-ROWS to WS-Temp-ED-Row\n              string \"Delete for \"\n                     WS-Invoice-Record (K:L)\n                     \" only found (rg01) \"\n                     WS-Temp-ED-Row\n                     \" Rows\"\n                          into WS-File-Key\n              end-string\n              go to ba999-End\n     else\n              move spaces to SQL-Msg SQL-State\n              move zero   to SQL-Err\n     end-if.\n     move     zero to FS-Reply WE-Error.\n     perform  ba999-End.\n*>\n bc080-Exit.  Exit.\n*>\n bc085-Process-Delete-ALL.    *> THIS IS NON STANDARD - NEEDED (sl940) - Coded/ D.Tested.\n*>\n*> Processes RG rows - Called by ba085-Process-Delete-All\n*>  As coded it will delete all body-lines within a given invoice, hopefully.\n*> This is the equivalent of :\n*>           EXEC SQL\n*>              DELETE\n*>              FROM SAINV-LINES-REC WHERE 'IL-INVOICE' = WS-Sih-Invoice\n*>           END-EXEC.\n*>\n*>  That creates the following code from dbpre\n*>\n*>   MOVE LOW-VALUES TO SQLCA-STATEMENT.\n*>   STRING\n*>   \"DELETE \" DELIMITED SIZE\n*>     \"FROM \" DELIMITED SIZE\n*>     \"SAINV-LINES-REC \" DELIMITED SIZE\n*>     \"WHERE 'IL-INVOICE' = \" '\"' WS-Sih-Invoice '\"' *> \"\n*>   INTO SQLCA-STATEMENT.\n*>   CALL \"MySQL_query\" USING SQLCA-STATEMENT\n*>\n*> So if this does not work, it will be changed.\n*>\n     set      KOR-x1 to 2\n     move     KOR-offset (KOR-x1) to K\n     move     KOR-length (KOR-x1) to L\n*>\n     move     spaces to WS-Where\n     move     1   to J\n     string\n *>             \"`\"                   delimited by size\n *>             KeyName (KOR-x1)      delimited by space    *>   ?????? should be SA\n *>             \"`\"                   delimited by size\n *>             WS-Invoice-Record (K:L)    delimited by size\n*>\n              \"'IL-INVOICE'\"        delimited by size\n              '=\"'                  delimited by size      *> was '<\"'\n              WS-Sih-Invoice        delimited by size    *> Correct one ?\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     spaces to WS-File-Key\n     move     WS-Where (1:J)   to WS-Log-Where.   *>  For test logging\n     if    Testing-2\n           display Display-Message-1 with erase eos\n     end-if\n     move     55  to ws-No-Paragraph.\n*>      /MYSQL DELETE\\\n*>\n*>    Delete a row\n*>\n*>             TABLE=SAINV-LINES-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           STRING \"DELETE FROM \"\n             \"`SAINV-LINES-REC`\"\n             \" WHERE \"\n             WS-Where (1:J)\n             X\"00\" INTO WS-MYSQL-COMMAND\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>      /MYSQL-END\\\n     move     WS-MYSQL-COUNT-ROWS to WS-Temp-ED-Row\n     string   \"Deleting All lines in \" delimited by size\n               WS-Sih-Invoice          delimited by size\n               \" with \"\n                WS-Temp-Ed-Row (6:2)   delimited by size\n                \" lines.\"\n                      into WS-File-Key\n     end-string                                   *> for logging\n     if       WS-MYSQL-COUNT-ROWS not > zero    *> Changed for delete-ALL\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n                    move 99 to fs-reply\n                    move 995 to WE-Error\n              end-if\n              perform  ba999-End\n              go   to bc085-Exit\n     else      *> of course there could be no data in table\n              move spaces to SQL-Msg\n              move zero   to SQL-Err\n     end-if.\n     move     zero to FS-Reply WE-Error.\n     perform  ba999-End.\n*>\n bc085-Exit.  Exit.\n*>\n bc090-Process-Rewrite section.\n*>****************************\n*>\n     move     WS-Invoice-Record  to WS-Invoice-Line.\n     perform  bc000-HV-Load-rg1.       *> Load up the HV rg1 fields from table record in WS\n     move     WS-Sil-Key to WS-File-Key.\n*>\n     move     56    to ws-No-Paragraph.\n     set      KOR-x1 to 2            *> 2 = Lines\n     move     KOR-offset (KOR-x1) to K\n     move     KOR-length (KOR-x1) to L\n*>\n     move     spaces to WS-Where\n     move     1   to J\n     string   \"`\"                   delimited by size\n              KeyName (KOR-x1)      delimited by space\n              \"`\"                   delimited by size\n              '=\"'                  delimited by size\n              WS-Invoice-Record (K:L)       delimited by size\n              '\"'                   delimited by size\n                      into WS-Where\n                        with pointer J\n     end-string\n     move     WS-Where (1:J)   to WS-Log-Where.    *>  For test logging\n*>\n     perform  bc300-Update-rg1.\n*>\n     if       Testing-2\n              display Display-Message-1 with erase eos\n     end-if\n*>\n     if       WS-MYSQL-COUNT-ROWS not = 1\n              call  \"MySQL_errno\" using WS-MYSQL-Error-Number\n              call  \"MySQL_sqlstate\" using WS-MYSQL-SQLstate\n              move  WS-MYSQL-SqlState   to SQL-State\n              if    WS-MYSQL-Error-Number  not = \"0  \"\n                    call \"MySQL_error\" using Ws-Mysql-Error-Message\n                    move WS-MYSQL-Error-Number  to SQL-Err\n                    move WS-MYSQL-Error-Message to SQL-Msg\n              end-if\n              move 99 to fs-reply                  *> this may need changing for val in WE-Error!!\n              move 994 to WE-Error\n              perform ba999-End\n              go to bc090-Exit\n     end-if\n     move     zero   to FS-Reply\n                        WE-Error\n                        SQL-Err.\n     move     spaces to SQL-Msg.\n     perform  ba999-End.\n*>\n bc090-Exit.  exit.\n*>\n bc000-HV-Load-rg1 Section.     *> Dry chk ?\n*>*************************\n*>\n*>  Load the Host variables with data from the passed record\n*>\n*> Accommodate Repeating Groups...\n*> Now load the RG multi-rows into the 'OCCURS' fields of record.\n*>\n*> Loading RG table: SAINV-LINES-REC\n*> <<<<  this should be a move from invoice-rec to line rec >>>>> <<>>\n*>\n     initialize TD-SAINV-LINES-REC.\n*>\n     move     WS-Sil-Key         to HV1-IL-LINE-KEY.\n     move     WS-Sil-Line        to HV1-IL-LINE\n     move     WS-Sil-Invoice     to HV1-IL-INVOICE\n     move     WS-Sil-Product     to HV1-IL-PRODUCT\n     move     WS-Sil-Pa          to HV1-IL-PA\n     move     WS-Sil-Qty         to HV1-IL-QTY\n     move     WS-Sil-Type        to HV1-IL-TYPE\n     move     WS-Sil-Description to HV1-IL-DESCRIPTION\n     move     WS-Sil-Net         to HV1-IL-NET\n     move     WS-Sil-Unit        to HV1-IL-UNIT\n     move     WS-Sil-Discount    to HV1-IL-DISCOUNT\n     move     WS-Sil-Vat         to HV1-IL-VAT\n     move     WS-Sil-Vat-Code    to HV1-IL-VAT-CODE\n     move     WS-Sil-Update      to HV1-IL-UPDATE.\n*>\n*> End of SAINV-LINES-REC unload...\n*> End of Repeating Group processing...\n*>\n bc000-Exit.\n     exit section.\n*>\n bc100-UnloadHVs-rg1 Section.    *> Dry chk ?\n*>**************************\n*>\n*>  Load the data buffer in the interface with data from the host variables.\n*>\n*> Accommodate Repeating Groups...\n*> Now unload the RG multi-rows into the fields of record.\n*>\n*> Unloading RG table: SAINV-LINES-REC\n*>\n     initialize WS-Invoice-Line.\n*>\n     move     HV1-IL-LINE-KEY    to  WS-Sil-Key.\n     move     HV1-IL-LINE        to  WS-Sil-Line\n     move     HV1-IL-PRODUCT     to  WS-Sil-Product\n     move     HV1-IL-PA          to  WS-Sil-Pa\n     move     HV1-IL-QTY         to  WS-Sil-Qty\n     move     HV1-IL-TYPE        to  WS-Sil-Type\n     move     HV1-IL-DESCRIPTION to  WS-Sil-Description\n     move     HV1-IL-NET         to  WS-Sil-Net\n     move     HV1-IL-UNIT        to  WS-Sil-Unit\n     move     HV1-IL-DISCOUNT    to  WS-Sil-Discount\n     move     HV1-IL-VAT         to  WS-Sil-Vat\n     move     HV1-IL-VAT-CODE    to  WS-Sil-Vat-Code\n     move     HV1-IL-UPDATE      to  WS-Sil-Update.\n*>\n*> End of SAINV-LINES-REC unload... but save the last read line.\n*>\n     move     HV1-IL-Line to WS-Last-Read-Line.\n*>\n*> Now move it to primary WS record area.\n*>\n     move     WS-Invoice-Line to WS-Invoice-Record.\n*>\n*> End of Repeating Group processing...\n*>\n bc100-Exit.\n     exit section.\n*>\n bc200-Insert-rg1 Section.\n*>***********************\n*>\n*>  /MYSQL INSERT\\\n*>\n*>    Insert a row\n*>\n*>         TABLE=SAINV-LINES-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           MOVE 1 TO WS-MYSQL-I\n           STRING 'INSERT INTO '\n                    '`SAINV-LINES-REC` SET '\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-LINE-KEY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-LINE-KEY,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-INVOICE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-INVOICE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-LINE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-LINE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-PRODUCT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-PRODUCT,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-PA`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-PA,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-QTY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-QTY\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(16:05))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-TYPE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-TYPE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-DESCRIPTION`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-DESCRIPTION,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-NET`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-NET\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-UNIT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-UNIT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-DISCOUNT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-DISCOUNT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(19:02))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-VAT-CODE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-VAT-CODE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-UPDATE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-UPDATE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING \";\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING X\"00\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n       PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>  /MYSQL-END\\\n       .     *> period here\n*>\n bc200-Exit.\n     exit section.\n*>\n bc300-Update-rg1 Section.\n*>***********************\n*>\n*>  /MYSQL UPDATE\\\n*>\n*>    Update a row\n*>\n*>      TABLE=SAINV-LINES-REC\n           INITIALIZE WS-MYSQL-COMMAND\n           MOVE 1 TO WS-MYSQL-I\n           STRING 'UPDATE '\n                    '`SAINV-LINES-REC` SET '\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-LINE-KEY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-LINE-KEY,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-INVOICE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-INVOICE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(11:10))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-LINE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-LINE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-PRODUCT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-PRODUCT,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-PA`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-PA,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-QTY`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-QTY\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(16:05))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-TYPE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-TYPE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-DESCRIPTION`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-DESCRIPTION,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-NET`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-NET\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-UNIT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-UNIT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-DISCOUNT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-DISCOUNT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(19:02))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-VAT`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-VAT\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(14:07))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING \".\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING WS-MYSQL-EDIT(22:02)\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-VAT-CODE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           MOVE HV1-IL-VAT-CODE\n             TO WS-MYSQL-EDIT\n           STRING FUNCTION TRIM (WS-MYSQL-EDIT(18:03))\n             INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           STRING '\"' INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n           STRING ', 'INTO WS-MYSQL-COMMAND\n           WITH POINTER WS-MYSQL-I end-string\n*>\n           STRING '`IL-UPDATE`=\"' INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (HV1-IL-UPDATE,TRAILING)\n                  '\"'\n                   INTO WS-MYSQL-COMMAND\n                   WITH POINTER WS-MYSQL-I end-string\n           STRING \" WHERE \"\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n           STRING FUNCTION TRIM (WS-Where (1:J))\n              INTO WS-MYSQL-COMMAND\n              WITH POINTER WS-MYSQL-I end-string\n           STRING \";\" X\"00\" INTO WS-MYSQL-COMMAND\n             WITH POINTER WS-MYSQL-I end-string\n           PERFORM MYSQL-1210-COMMAND THRU MYSQL-1219-EXIT\n*>  /MYSQL-END\\\n       .     *> period here\n*>\n bc300-Exit.\n     exit section.\n*>\n bc998-Free.\n     move     58 to ws-No-Paragraph.\n*>      /MYSQL FREE\\\n*>\n*>    Free result array\n*>\n*>             TABLE=SAINV-LINES-REC\n           MOVE TP-SAINV-LINES-REC TO WS-MYSQL-RESULT\n           CALL \"MySQL_free_result\" USING WS-MYSQL-RESULT end-call\n*>      /MYSQL-END\\\n     set      Cursor-Not-Active-2 to true.\n*>\n Ca-Process-Logs.\n*>**************\n*>\n     call     \"fhlogger\" using File-Access\n                               ACAS-DAL-Common-data.\n*>\n ca-Exit.     exit.\n*>\nend program slinvoiceMT.",
        "line": 2503
      }
    ],
    "evaluates": [
      {
        "content": "File-Function\n        when  1\n              go to ba020-Process-Open          *> Coded / D.tested\n  ...",
        "line": 515,
        "whenCount": 11
      },
      {
        "content": "Access-Type\n              when  5                           *> fn-equal-to\n                    move ...",
        "line": 973,
        "whenCount": 5
      }
    ],
    "validations": []
  },
  "complexity": {
    "mccabe": 45,
    "cognitive": 39,
    "halstead": {
      "uniqueOperators": 1,
      "uniqueOperands": 137,
      "totalOperators": 139,
      "totalOperands": 278,
      "vocabulary": 138,
      "length": 417,
      "volume": 2964.2546984764967
    }
  },
  "quality": {
    "gotos": [],
    "deadCode": [],
    "missingErrorHandlers": []
  },
  "sql": {
    "hasSQL": false,
    "statements": []
  },
  "cics": {
    "hasCICS": false,
    "statements": []
  }
}
